
<ion-pane>
	<ion-nav-bar align-title="center" class="bar-light aiv-header" >
		<ion-nav-buttons side="left">
			<a class="item item-icon-right transparent" style="border-left:none;border-right:none;border-top:none;border-bottom:none;padding:8px 54px 8px 8px;">
				<i style="cursor:pointer;" class="icon {{loginInfo.user_login==''?'ion-log-in assertive':'ion-log-out balanced'}}" ng-click="aiv_login();$event.stopPropagation();"></i>
				<label>
					<strong>User</strong> :
					<span ng-if="loginInfo.user_login"> {{loginInfo.user_displayname}}</span>
				</label>
			</a>
			<a ng-if="((terminalData.type!='KITCHEN' && terminalData.type != 'BACK') || (terminalData.type == 'BACK' && backTemplate.id != 'MPOS')) " class="item item-icon-right transparent" style="border-left:none;border-right:none;border-top:none;border-bottom:none;padding:8px 54px 8px 8px;" ng-click="openCustomerEditModal(true);">
				<i style="cursor:pointer;" class="icon ion-close-circled" ng-click="removeUser();$event.stopPropagation();"></i>
				<label style="cursor:pointer;">
					<strong>Customer</strong> :
					<span ng-if="formCheckout.billing_address.first_name"> {{formCheckout.billing_address.first_name}} {{formCheckout.billing_address.last_name}}</span>
					<span ng-if="!formCheckout.billing_address.first_name"> Guest</span>
				</label>
			</a>
			<a ng-if="terminalData.type!='KITCHEN'" class="item item-icon-left hide-title transparent" style="border-left:none;border-right:none;border-top:none;border-bottom:none;padding:8px 8px 8px 40px;">
				<i class="icon ion-ios-telephone"></i>
				<label style="font-size: 20px;line-height: 1;" class="hide-title">
					<strong> {{aiv_info.phone1}}</strong>
				</label>
			</a>
	  </ion-nav-buttons>
	  <ion-nav-buttons side="right">
		<button ng-if="terminalData.type!='KITCHEN'" class="button button-positive icon ion-ios-telephone hide-phone" ng-click="openPhonePopover($event);" title="Phone number"></button>
		<!--<button ng-show="hf_loyalty.enabled&&loginInfo.role!='user'" class="button button-calm icon ion-ribbon-b" style="margin-left:10px;" ng-click="openLoyaltyPopup();" title="Loyalty"><label class="bar-btn-text"> Loyalty</label></button>-->
		<button ng-if="aiv_info.enable_sms=='TRUE'&&terminalData.type!='KITCHEN'" style="margin-left:10px;" class="button button-calm icon ion-android-textsms" ng-click="openSMSModal();" title="Send SMS"> SMS</button>
		<div ng-if="terminalData.type=='KITCHEN'" class="item item-toggle item-stable" style="margin-left:10px;border-radius:4px;padding-top:8px;">Show Products
			<label class="toggle" style="top:1px;">
			   <input ng-model="kitchen_menu.products" type="checkbox">
			   <div class="track">
				 <div class="handle"></div>
			   </div>
			</label>
		</div>
		<a class="button button-stable button-outline " style='font-size: xx-large;'>{{displayTime}}</a>
		<button ng-if="(terminalData.type!='KITCHEN' && terminalData.type != 'BACK') || (terminalData.type == 'BACK' && backTemplate.id != 'MPOS')" style="margin-left:10px;" class="button button-assertive icon ion-android-cart" ng-click="openOrderModal();" title="View orders"><label class="bar-btn-text">ORDERS</label></button>
		<button style="padding-right:0px;" ng-click="terminalData.type!='KITCHEN'?openPendingOrderModal():showKitchenDropdown($event);" title="Pending orders" class="button button-icon ion-android-notifications white"><span class="badge badge-assertive header-badge">{{alertArr.length}}</span></button>
		<button style="padding:0px;" ng-if="aiv_info.enable_kitchen=='TRUE' && ((terminalData.type!='KITCHEN' && terminalData.type != 'BACK') || (terminalData.type == 'BACK' && backTemplate.id != 'MPOS'))" ng-click="openKitchenOrderModal();" title="Kitchen orders" class="button button-icon ion-coffee white"><span class="badge badge-assertive header-badge">{{readyArr.length}}</span></button>
		<button ng-if="(terminalData.type=='BOTH' || (terminalData.type == 'BACK' && backTemplate.id != 'MPOS'))" style="padding:0px;" ng-click="showCallPopup();" title="{{callerid_status.title}}" class="button button-icon ion-android-call {{callerid_status.class}}"><span ng-show="CID_ph_num" class="badge badge-assertive header-badge">1</span></button>
		<a class="button-icon icon ion-wifi {{pos_status.class}}" title="{{pos_status.title}}"></a>
		<button ng-hide="manual_sync" class="button button-icon icon ion-loop balanced  white" title="Synchronize" ng-click="syncDB();"></button>
		<ion-spinner ng-if="manual_sync" icon="android" class="spinner-positive"></ion-spinner>
		<button ng-if="loginInfo.role!='user'&&loginInfo.role!='server'" class=" button button-icon icon ion-android-arrow-dropdown  white" style="margin-right:10px" title="More" ng-click="showDropdown($event);"></button>
	</ion-nav-buttons>
	</ion-nav-bar>
	<ion-nav-view name="tab-front" animation="slide-left-right"></ion-nav-view>
	<ion-nav-view name="tab-back" animation="slide-left-right"></ion-nav-view>
	<ion-nav-view name="tab-kitchen" animation="slide-left-right"></ion-nav-view>
</ion-pane>
<script id="options-modal.html" type="text/ng-template">
  <ion-modal-view class="modal-responsive aiv-modal-fullscreen">
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">{{::sel_product.title}}</h1>
        <div class="buttons opt-buttons">
			<h3 class="bold-text">{{sel_product_price | currency:"£":2}}</h3>
        </div>
    </ion-header-bar>
    <ion-content scroll="false" delegate-handle="optionsScroll">
	<div class="row" style="height:100%">
		<div class="col col-80">
			<ion-scroll style="height:100%;">
				<div class="row responsive-sm product-gallery">
					<div class="col col-25" style="padding:0px;" ng-repeat="item in ::filtered_attributes.option track by $index" ng-click="setAttributeOptions(item);">
						<div class="item product-style"   style="min-height:60px;background-color: #4CAF50;" ng-class="{'prdt-selected':set_options_color(item)}">
							<label class="item-text-wrap h5 product-letter" >{{::item.name | split:'###':0 | split:'_':0}}</label>
						</div>
					</div>
				</div>
				<div class="row responsive-sm product-gallery" ng-repeat="(key, values) in sel_option.linked track by $index">
					<div class="col col-25" style="padding:0px;" ng-repeat="item in values track by $index" ng-click="updateAttributeOptions(key, item,sel_option.name);">
						<div class="item product-style" style="min-height:60px;background-color: #ff9800;"  ng-class="{'prdt-selected':set_attrlinked_color(item)}">
							<label class="item-text-wrap h5 product-letter" >{{item | split:'###':0 | split:'_':0}}</label>
						</div>
					</div>
				</div>
				<div class="row responsive-sm product-gallery">
					<div class="col col-20" style="padding:0px;" ng-repeat="option in sel_option.options track by $index" ng-click="updateVariationInfo(option,sel_option)">
						<div class="item product-style">
							<label class="item-text-wrap h5 product-letter" >{{option | split:'###':0}}</label>
						</div>
					</div>
				</div>
			</ion-scroll>
		</div>
		<div class="col col-20">
			<ion-scroll style="height:100%;">
				<div class="item item-text-wrap" style="background-color:#ffc900;padding:2px;">
					<h2 style="font-weight: bold;">{{sel_product_price | currency:"£":2}}</h2>
					<h2 style="font-weight: bold;">{{::sel_product.title}}</h2>
					<ion-list >
					<ion-item class="item item-text-wrap pos-cart pos-list" ng-repeat="(key, value) in current_display_options track by $index" ng-class="{selected : key === selectattrwindow}"  >
						<div class="row responsive-sm ">
							<div class="col  col-center" style="font-size:0.9em;">{{key | split:'###':0 | split:'_':0}}
								<!--<p ng-repeat="(key, value) in product.sel_variations.attributes" ng-show="((value | split:'###':1)=='T')">{{key | split:'###':0 | split:'_':0}} - {{value | split:'###':0}}</p>-->
							</div>
							<div class="col col-33 col-center" style="font-size:0.9em;">{{value.toFixed(2)}}</div>
							<!--<div class="col col-10 col-center ">
							<button class="button button-small assertive" ng-click="deleteProduct($index);"><i class="icon ion-close"></i></button></div>-->
						</div>
					</ion-item>	
					</ion-list>
					<ion-item class="item " >
						<div class="row ">
							<div class="col col-50 col-center ">
								<button class="button  positive" ng-click="moveDownOption()"><i class="icon ion-arrow-down-a"></i></button>
							</div>
							<div class="col col-50 col-center ">
								<button class="button  positive" ng-click="moveUpOption();"><i class="icon ion-arrow-up-a"></i></button>
							</div>
						</div>
					</ion-item>	
					<ion-item class="item item-text-wrap " >
						<div class="row responsive-sm ">
							<div class="col col-center ">
								<button class="button  assertive" ng-click="removeOptionAttribute();"><i class="icon ion-close-circled"></i></button>
							</div>
						</div>
					</ion-item>	
				</div>
			</ion-scroll>
		</div>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 60px;">
		<div class="button-bar">
			<button class="button button-full button-positive pos-footer-btn" ng-click="closeModal('SHOW_OPTIONS');"><i class="icon ion-close"></i> Cancel</button>
			<button style="margin-left:2px!important;" class="button button-full button-positive pos-footer-btn" ng-click="intoCart(sel_product);closeModal('SHOW_OPTIONS');"><i class="icon ion-bag"></i> Add 2 cart</button>
		</div>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="options-modal-edit.html" type="text/ng-template">
  <ion-modal-view class="modal-responsive aiv-modal-fullscreen">
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">{{::sel_product.title}}</h1>
        <div class="buttons opt-buttons">
			<h3 class="bold-text">{{sel_product_price | currency:"£":2}}</h3>
        </div>
    </ion-header-bar>
    <ion-content scroll="false" delegate-handle="optionsScroll">
	<div class="row" style="height:100%">
		<div class="col col-80">
			<ion-scroll style="height:100%;">
				<div class="row responsive-sm product-gallery">
					<div class="col col-25" style="padding:0px;" ng-repeat="item in ::filtered_attributes.option track by $index" ng-click="setAttributeOptions(item);">
						<div class="item product-style"   style="min-height:60px;background-color: #4CAF50;" ng-class="{'prdt-selected':set_options_color(item)}">
							<label class="item-text-wrap h5 product-letter" >{{::item.name | split:'###':0 | split:'_':0}}</label>
						</div>
					</div>
				</div>
				<div class="row responsive-sm product-gallery" ng-repeat="(key, values) in sel_option.linked track by $index">
					<div class="col col-25" style="padding:0px;" ng-repeat="item in values track by $index" ng-click="updateAttributeOptions(key, item,sel_option.name);">
						<div class="item product-style" style="min-height:60px;background-color: #ff9800;"  ng-class="{'prdt-selected':set_attrlinked_color(item)}">
							<label class="item-text-wrap h5 product-letter" >{{item | split:'###':0 | split:'_':0}}</label>
						</div>
					</div>
				</div>
				<div class="row responsive-sm product-gallery">
					<div class="col col-25" style="padding:0px;" ng-repeat="option in sel_option.options track by $index" ng-click="updateVariationInfo(option,sel_option)">
						<div class="item product-style">
							<label class="item-text-wrap h5 product-letter" >{{option | split:'###':0}}</label>
						</div>
					</div>
				</div>
			</ion-scroll>
		</div>
		<div class="col col-25">
			<ion-scroll style="height:100%;">
				<div class="item item-text-wrap" style="background-color:#ffc900;padding:2px;">
					<h2 style="font-weight: bold;">{{sel_product_price | currency:"£":2}}</h2>
					<h2 style="font-weight: bold;">{{::sel_product.title}}</h2>
					<ion-list >
					<ion-item class="item item-text-wrap pos-cart pos-list" ng-repeat="(key, value) in current_display_options track by $index" ng-class="{selected : key === selectattrwindow}"  >
						<div class="row responsive-sm ">
							<div class="col  col-center" style="font-size:0.9em;">{{key | split:'###':0 | split:'_':0}}
								<!--<p ng-repeat="(key, value) in product.sel_variations.attributes" ng-show="((value | split:'###':1)=='T')">{{key | split:'###':0 | split:'_':0}} - {{value | split:'###':0}}</p>-->
							</div>
							<div class="col col-33 col-center" style="font-size:0.9em;">{{value.toFixed(2)}}</div>
							<!--<div class="col col-10 col-center ">
							<button class="button button-small assertive" ng-click="deleteProduct($index);"><i class="icon ion-close"></i></button></div>-->
						</div>
					</ion-item>	
					</ion-list>
					<ion-item class="item " >
						<div class="row ">
							<div class="col col-50 col-center ">
								<button class="button  positive" ng-click="moveDownOption()"><i class="icon ion-arrow-down-a"></i></button>
							</div>
							<div class="col col-50 col-center ">
								<button class="button  positive" ng-click="moveUpOption();"><i class="icon ion-arrow-up-a"></i></button>
							</div>
						</div>
					</ion-item>	
					<ion-item class="item item-text-wrap " >
						<div class="row responsive-sm ">
							<div class="col col-center ">
								<button class="button  assertive" ng-click="removeOptionAttribute();"><i class="icon ion-close-circled"></i></button>
							</div>
						</div>
					</ion-item>	
				</div>
			</ion-scroll>
		</div>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 60px;">
		<div class="button-bar">
			<button class="button button-full button-positive pos-footer-btn" ng-click="closeModal('SHOW_OPTIONS_EDIT');"><i class="icon ion-close"></i> Cancel</button>
			<button style="margin-left:2px!important;" class="button button-full button-positive pos-footer-btn" ng-click="intoCartCooking(sel_product);closeModal('SHOW_OPTIONS_EDIT');"><i class="icon ion-bag"></i> Add 2 cart</button>
		</div>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="product-edit-modal.html" type="text/ng-template">
  <ion-modal-view class="modal-responsive aiv-modal-fullscreen">
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Edit product</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('EDIT_PRODUCT');"></button>
        </div>
    </ion-header-bar>
    <ion-content>
	<div class="list card">
		<div ng-show="errors.edit_cart_product" class="error assertive animated fadeInLeft h4 padding-left">
			<i class="ion-information-circled"></i> {{errors.edit_cart_product}}
		</div>
		<label class="item item-divider">
			<div class="input-label">
				{{edit_product.title}}
				<p ng-repeat="(key, value) in edit_product.sel_variations.attributes" ng-show="((value | split:'###':1)=='T')">{{key | split:'###':0 | split:'_':0}} - {{value | split:'###':0}}</p>
			</div>
		</label>
		<div class="item item-input-inset">
			<label class="input-label">
				Quantity
			</label>
			<label class="item-input-wrapper">
				<input class="aiv-input" ng-focus="openPopover($event,'PRDT_QTY',edit_product.quantity)" ng-model="edit_product.quantity" type="text" placeholder="Quantity" value="{{edit_product.quantity}}">
			</label>
		</div>
		<div class="item item-input-inset">
			<label class="input-label">
				Price
			</label>
			<label class="item-input-wrapper">
				£ <input class="aiv-input" ng-focus="openPopover($event,'PRDT_ATTR_PRICE',edit_product.sel_variations.price)" ng-change="cartPriceChanged()" ng-show="edit_product.attributes.length" ng-model="edit_product.sel_variations.price" type="text" placeholder="Price">
				<input class="aiv-input" ng-focus="openPopover($event,'PRDT_PRICE',edit_product.price)" ng-change="cartPriceChanged()" ng-hide="edit_product.attributes.length" ng-model="edit_product.price" type="text" placeholder="Price">
			</label>
		</div>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<button class="button button-positive button-full pos-footer-btn" ng-click="saveEditedProduct(edit_product);"><i class="icon ion-checkmark"></i>Done</button>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="discount-modal.html" type="text/ng-template">
  <ion-modal-view class="modal-responsive aiv-modal-fullscreen" >
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Add Discount</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('ADD_DISCOUNT');"></button>
        </div>
    </ion-header-bar>
    <ion-content>
		<div class="list card">
			<div ng-if="loginInfo.role!='shop_manager'" class="button-bar" style="padding:1px;">
				<label class="item aiv-item-flex aiv-custom-font-size">Discount</label>
				<button class="button button-positive bold-text aiv-custom-font-size" style="border-right-width:1px;" ng-repeat="item in user_discounts | orderBy:discount" ng-class="cart_discount.disc_num!=item?'button-outline':''" ng-click="cart_discount.disc_num=item;showDiscount(true);">{{item}}</button>
				<label class="item bold-text aiv-custom-font-size aiv-item-flex">{{cart_discount.disc_total | currency:'':0}}% off</label>
			</div>
			<div ng-if="loginInfo.role!='shop_manager'" class="item item-input-inset">
				<div class="input-label">Manager Password</div>
				<label class="item-input-wrapper">
					<input ng-focus="setKeyInput('REQ_PASS',action_auth.pass)" ng-model="action_auth.pass" type="password" placeholder="For variable discounts">
				</label>
				<button class="button button-positive" title="Check Password" ng-click="checkDiscountPassword(action_auth.pass);"><i class="icon ion-checkmark"></i></button>
			</div>
			<div ng-if="loginInfo.role=='shop_manager'" class="item item-input-inset custom-font-style">
				<label class="input-label aiv-custom-font-size">
					Discount
				</label>
				<button ng-init="button.clicked=!cart_discount.percent_click" ng-class="button.clicked?'button-dark':'button-stable'" class="button button-stable aiv-custom-font-size" ng-click="button.clicked=!button.clicked;showDiscount(false);">£</button>
				<label class="item item-input">
					<input ng-focus="setKeyInput('DISCOUNT',cart_discount.disc_num)" ng-model="cart_discount.disc_num" type="text" ng-change="showDiscount();" value="{{cart_discount.disc_num | currency:'':2}}">
				</label>
				<button ng-init="button.clicked=!cart_discount.percent_click" ng-class="button.clicked?'button-stable':'button-dark'" class="button button-stable aiv-custom-font-size" ng-click="button.clicked=!button.clicked;showDiscount(true);">%</button>
				<label class="input-label padding-left aiv-custom-font-size">
					<span>{{cart_discount.disc_total | currency:'':0}}% off</span>
				</label>
			</div>
			<div class="item item-input-inset">
				<label class="input-label aiv-custom-font-size">
					Coupon
				</label>
				<label class="item-input-wrapper">
				  <input class="aiv-custom-font-size" ng-focus="setKeyInput('COUPON',coupon.code)" ng-model="coupon.code" type="text" placeholder="Coupon code">
				</label>
				<button class="button button-icon icon ion-plus-circled dark aiv-custom-font-size" ng-disabled="!coupon.code" ng-click="addCoupon()">
				</button>
			</div>
			<div class="item item-input-inset" style="border-bottom: unset;">
				<div class="row ">
					<label class="input-label aiv-custom-font-size">
						Vouchor
					</label>
					<label class="item-input-wrapper">
					  <input class="aiv-custom-font-size" ng-focus="setKeyInput('VOUCHER',voucher.code)" ng-model="voucher.code" type="text" placeholder="Enter vouchor code">
					</label>
					<button class="button button-icon icon ion-checkmark dark aiv-custom-font-size" ng-disabled="!voucher.code" ng-click="addVoucher('FIXED')">
					</button>
				</div>
			</div>
			<div class="item item-input-inset" style="border-top: unset;">
				<div class="row responsive-sm product-gallery bag-charges">
					<div class="col col-20" ng-repeat="voucher_get in statcVoucher">
						<button class="button button-full button-large bold-text tile-appear" ng-click="addVoucher(voucher_get)" >{{voucher_get}}</button>
					</div>
				</div>
			</div>
		</div>
		<div ng-show="coupon.err" class="error assertive animated fadeInLeft h4 padding-left">
			<i class="ion-information-circled"></i> {{coupon.err}}
		</div>
		<div ng-show="success_done.coupon_applied" class="error balanced animated fadeInLeft h4 padding-left">
			<i class="ion-checkmark"></i> {{success_done.coupon_applied}}
		</div>
		<div class="list card" ng-show="coupon_lines.length">
			<div class="item item-icon-right aiv-energized" ng-repeat="disc in coupon_lines track by $index" ng-init="getDiscount()">
				<div class=" alignleft assertive">
					{{disc.code}}
				</div>
				<div ng-hide="disc.type" class=" alignright assertive">
					{{disc.rate | currency:"-£":2}}
				</div>
				<div ng-show="disc.type" class=" alignright assertive">
					{{disc.rate*grand.Total/100 | currency:"-£":2}}
				</div>
				<div style="clear: both;"></div>
				<i class="icon ion-close-circled" ng-click="removeCoupon($index,disc)"></i>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
					<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
				</ng-keypad>						
			</div>
		</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<div class="button-bar">
			<button class="button button-positive" ng-click="removeDiscount();closeModal('ADD_DISCOUNT');"><i class="icon ion-trash-a"></i>Remove</button>
			<button style="margin-left:2px;" class="button button-positive" ng-click="applyDiscount();closeModal('ADD_DISCOUNT');"><i class="icon ion-checkmark"></i>Apply</button>
		</div>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="detail-modal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-positive">
            <h1 class="title">{{::currentProduct.name}}</h1>
            <button class="button button-icon ion-close-circled" ng-click="closeDetails()"></button>
        </ion-header-bar>
        <ion-content>
		<div class="list card">
			<div class="row responsive-sm">
				<div class="col" align="center">
					<p>{{currentProduct.name}}</p>
					<div ng-repeat="attr in ::currentProduct.meta track by $index">{{::attr.key}}: {{::attr.value}}</div>
				</div>
			</div>
		</div>
        </ion-content>
    </ion-modal-view>
</script>
<script id="payment-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Select Payment Method</h1>
			<div class="buttons opt-buttons">
				<h3>£{{payment_select.to_pay | number:2}}</h3>
			</div>
        </ion-header-bar>
        <ion-content>
			<div class="row">
				<div class="col col-33" style="border-right:1px solid #ddd;">
					<div class="row">
						<div class="col">
							<ion-list class="pos-options-list item-text-wrap">
								<ion-radio style="line-height:0.8" ng-if="method.enable" ng-repeat="method in ::PaymentMethods track by method.id" ng-value="method.id" ng-model="payment_select.id" ng-change="savePayment(method)" name="pay_method">{{::method.title}}</ion-radio>
							</ion-list>
							<div class="padding row" ng-if="selected_pay.id=='cod'&&aiv_toggles.show_cash">
								<ng-keypad on-key-pressed='onKeyPressed' class=" bold-text large-text tile-appear">
									<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
									<!--<ng-key ng-key-type='keypad.type' ng-key-data="keypad.data">{{keypad.data}}</ng-key>-->
								</ng-keypad>
							</div>
							<div class="card payment-loyalty" ng-show="hf_loyalty.enabled && loyalty_card.id">
								<label ng-show="loyalty_card.current_points" class="item item-input row">
									<span class="col col-50 large-text"  style="font-size: larger;">Current points</span>
									<span class="col col-50 text-right positive large-text"  style="font-size: larger;">{{loyalty_card.current_points}}</span>
								</label>
								<label ng-show="loyalty_card.reward_points&&loyalty_dbaccess_status==true" class="item item-input row">
									<span class="col col-50 large-text"  style="font-size: larger;">Total points</span>
									<span class="col col-50 text-right positive large-text"  style="font-size: larger;">{{loyalty_card.reward_points}}</span>
								</label>
								<label ng-show="loyalty_dbaccess_status==false" class="item item-assertive text-center large-text">
									No Connection
								</label>
								<label ng-show="loyalty_card.reward_money&&!loyalty_card.points_redeem_status" class="item item-input row">
									<span class="col col-50 large-text"  style="font-size: larger;">Redeem amount</span>
									<span class="col col-50 text-right positive large-text"  style="font-size: larger;">{{loyalty_card.reward_money | currency:"£":2}}</span>
								</label>
								<button style="min-height: 40px;line-height:0" ng-show="show_redeem_btn&&loyalty_dbaccess_status==true" class="button button-full button-large button-royal bold-text tile-appear" ng-click="redeemLoyaltyLocally()">Redeem</button>
							</div>
							<div class="card payment-loyalty" ng-if="formCheckout.customer_meta.loyalty_card_id">
								<label  class="item item-input row" style="line-height:1.0;">
									<span class="col col-50 text-right positive large-text" style="font-size: larger;">{{formCheckout.billing_address.first_name}} {{formCheckout.billing_address.last_name}} , {{formCheckout.billing_address.phone}}</span>
								</label>
								<label  class="item item-input row" style="line-height:1.0;">
									<span class="col col-50 large-text" style="font-size: larger;">Loyalty ID</span>
									<span class="col col-50 text-right positive large-text" style="font-size: larger;">{{formCheckout.customer_meta.loyalty_card_id}}</span>
								</label>
								<button style="min-height: 40px;line-height:0" class="button button-full button-large button-assertive bold-text tile-appear" ng-click="removeUser()">Cancel</button>
							</div>
							
						
						</div>
					</div>
					<div class="row" ng-if="aiv_toggles.show_cash">
						<div class="col">
							<div ng-if="selected_pay.id=='cod'&&selected_shipping.id!=''&&selected_shipping.id!='sitin'">
								<h4 class="text-center">---- OR ----</h4>
								<ion-checkbox ng-model="payment_select.delivery" style="color: #0d0dff;border: 3px solid #0000ff;" class="item-checkbox-right">On Collection/Delivery</ion-checkbox>
							</div>
						</div>
					</div>
				</div>
				<div class="col">
					<!--<label ng-if="payment_select.err" class="error assertive animated fadeInLeft h4">
						<i class="ion-information-circled"></i> {{payment_select.err}}
					</label>-->
					<!--<input ng-model="loyalty_card_id" type="text" placeholder="" style="font-size:x-large">
					<button class="button button-full button-positive" ng-click="checkLoyaltyCustomer(loyalty_card_id)">Go</button>-->

					<div class="card" style="margin:0px 10px;">
						<label class="item item-input bold-text large-text tile-appear" style="padding:8px;">
							<span class="input-label large-text">Order Type</span>
							<span class="positive">{{::payment_select.shipping_method}}</span>
						</label>
						<div ng-if="split_payment.paid">
							<label class="item item-input  large-text tile-appear" style="padding:8px;">
								<span class="input-label">Paid Amount</span>
								<span class="positive">£{{::split_payment.paid | number:2}}</span>
							</label>
							<label class="item item-input  large-text tile-appear" style="padding:8px;">
								<span class="input-label">Amount to Pay</span>
								<span class="positive">£{{::split_payment.to_pay | number:2}}</span>
							</label>
						</div>
						<div ng-if="payment_select.del_charge" class="row item" style="padding:8px;">
							<div class="col col-50 bold-text large-text">SubTotal : <span class="positive bold-text large-text">£{{payment_select.to_pay-payment_select.del_charge | number:2}}</span></div>
							<div class="col col-50 bold-text large-text">Delivery Charge : <span class="positive bold-text large-text">£{{payment_select.del_charge | number:2}}</span></div>
						</div>
						<div ng-if="!order_to_pay" class="item item-toggle  large-text tile-appear">Print KOT Slip
							<label class="toggle">
							   <input ng-model="print_config.kot" type="checkbox">
							   <div class="track">
								 <div class="handle"></div>
							   </div>
							</label>
						</div>
						<div ng-if="(payment_select.shipping_method=='Takeaway'||payment_select.shipping_method=='Sit-In')" class="item item-toggle  large-text tile-appear">Print Receipt
							<label class="toggle">
							   <input ng-model="print_config.receipt" type="checkbox">
							   <div class="track">
								 <div class="handle"></div>
							   </div>
							</label>
						</div>
					</div>
					<div class="list card" style="margin:0px 10px;" ng-if="selected_pay.id">
						<div ng-if="selected_shipping.id!='sitin'&&cartItems.length">
							<label class="item item-divider">Bag Charges</label>
							<div class="row responsive-sm product-gallery bag-charges">
								<!--<div class="col col-20">
									<button class="button button-full button-large bold-text tile-appear" ng-click="updateBagCharge(0)" ng-class="!bagCharges.selected?'button-positive':'button-positive button-outline'">NONE</button>
								</div>-->
								<div class="col col-20" ng-repeat="charge in bagCharges.charges">
									<button class="button button-full button-large bold-text tile-appear" ng-click="updateBagCharge(charge,false)" ng-class="bagCharges.selected==charge?'button-positive':'button-positive button-outline'" >{{bagCharges.currency+" "+charge}}</button>
								</div>
							</div>
						</div>
						<label class="item item-divider">
							<div class="input-label large-text">
								{{selected_pay.description}}
							</div>
						</label>
						<div ng-if="selected_pay.id=='cod'&&selected_shipping.id!=''&&selected_shipping.id!='sitin'&&!aiv_toggles.show_cash">
							<ion-checkbox ng-model="payment_select.delivery" style="color: #0d0dff;border: 3px solid #0000ff;" class="item-checkbox-right">On Collection/Delivery</ion-checkbox>
						</div>
						<div ng-if="selected_pay.id=='cod'&&aiv_toggles.show_cash">
							<div class="item item-input-inset">
								<label class="input-label  large-text tile-appear">
									Tendered
								</label>
								<label class="item-input-wrapper  large-text tile-appear">
									£ <input ng-model="payment_select.amount" ng-change="calculateTender()" type="text" placeholder="" style="font-size:x-large">
								</label>
							</div>
							<div class="item item-input-inset">
								<label class="input-label  large-text tile-appear">
									Change
								</label>
								<label class="item-input-wrapper  large-text tile-appear">
									£ <input ng-model="payment_select.tender" disabled type="text" placeholder=""   style="font-size:x-large">
								</label>
							</div>
						</div>
						<div style="margin-top:1px;display:flex;" ng-if="selected_pay.id=='cod'&&aiv_toggles.show_cash">
							<ng-keypad on-key-pressed='onKeyPressed'  class=" bold-text large-text tile-appear">
								<ng-key class="aiv-extra-key" ng-repeat='key in ::aiv_extra_keys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
								<ng-key class="aiv-extra-key quick-pay" ng-key-type='keypad.type' ng-key-data="amount_key" ng-click="complete('completed');">{{amount_key}}</ng-key>
							</ng-keypad>
						</div>
					</div> 
					
				</div>
			</div>
        </ion-content>
		<ion-footer-bar class="bar-light" style="height: 64px;">
			<div class="button-bar">
				<button class="button button-full button-positive pos-footer-btn" ng-click="closeModal('PAYMENT');"><i class="icon ion-arrow-return-left"></i> Back</button>
				<button ng-if="!order_to_pay.order&&!$scope.edit_order_flags.order_loaded" style="margin-left:2px!important;" class="button button-full button-calm pos-footer-btn" ng-click="openCustomerModal();" title="Add Customer"><i class="icon ion-android-person-add"></i> Customer</button>
				<button ng-if="order_to_pay.order" style="margin-left:2px!important;" class="button button-full button-assertive pos-footer-btn" ng-click="closeModal('PAYMENT');editOrder('EDIT_ORDER',order_to_pay.order);" title="Edit Order"><i class="icon ion-edit"></i> Edit Order</button>
				<!--<button ng-if="payment_select.shipping_method=='Takeaway'" style="margin-left:2px!important;" ng-disabled="pos_action.done_clicked" class="button button-full button-calm pos-footer-btn" ng-click="completeUnpaid();"><i class="bold-text large-text"></i> Set as UNPAID</button>-->
				<button style="margin-left:2px!important;" ng-disabled="pos_action.done_clicked" class="button button-full button-balanced pos-footer-btn" ng-click="complete('completed');"><i class="bold-text large-text"></i> Finish</button>
			</div>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="shipping-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Select Delivery Method</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('SHIPPING');"></button>
			</div>
        </ion-header-bar>
        <ion-content>
			<div class="row">
				<div class="col col-33" style="border-right:1px solid #ddd;">
					<ion-list>
						<ion-radio name="ship_method" ng-model="ship_select.id" ng-init="temp_shipping.id" ng-change="changeShipping(method);" ng-value="method.id" ng-repeat="method in ::shipping_methods track by method.title">{{::method.title}}</ion-radio>
					</ion-list>
					<div class="padding" ng-if="temp_shipping.id=='local_delivery'">
						<ng-keypad on-key-pressed='onKeyPressed'>
							<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
							<!--<ng-key ng-key-type='keypad.type' ng-key-data="keypad.data">{{keypad.data}}</ng-key>-->
						</ng-keypad>
					</div>
				</div>
				<div class="col">
					<div class="list card" ng-if="temp_shipping.id">
						<label ng-if="ship_select.err" class="error assertive animated fadeInLeft h4">
							<i class="ion-information-circled"></i> {{ship_select.err}}
						</label>
						<label class="item item-divider item-text-wrap">
							{{temp_shipping.method_description}}
						</label>
						<div ng-if="temp_shipping.id=='local_delivery'">
							<div class="item item-input-inset">
								<label class="input-label">
									Delivery charge
								</label>
								<label class="item-input-wrapper">
									£ <input ng-model="temp_shipping.fee" type="text" placeholder="">
								</label>
							</div>
						</div>
						<div ng-if="temp_shipping.id=='sitin'" class="row responsive-sm product-gallery ">
							<div class="col col-20 aiv-click" style="padding:0px;" ng-repeat="table in sitin_tables.tables" ng-click="sitin_tables.selected=table;">
								<div class="item product-style" ng-class="{'prdt-selected':table==sitin_tables.selected}">
									<label class="item-text-wrap large-text product-letter" >{{table}}</label>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
        </ion-content>
		<ion-footer-bar class="bar-light" style="height: 54px;">
			<button class="button button-positive button-full pos-footer-btn"  ng-click="saveShipping(true);"><i class="icon ion-checkmark">Save</i></button>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="note-modal.html" type="text/ng-template">
    <ion-modal-view style="height: 595px;top:calc( (100vh - 595px) / 2);" class="modal-responsive">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">{{note_type == 'ORDER'?'Driver Note':'Product Note'}}</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('ORDER_NOTE');"></button>
			</div>
        </ion-header-bar>
        <ion-content>
		<div class="card" style="margin:0px;">
			<label class="item item-input">
				<textarea id="aiv-note" ng-model="order_note.note" rows="10" placeholder="Notes"></textarea>
			</label>
			<div class="row">
				<div class="col">
					<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
						<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
						<ng-key class="aiv_qwerty" style="width:100%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
					</ng-keypad>						
				</div>
			</div>
		</div>
        </ion-content>
		<ion-footer-bar class="bar-light" style="height: 54px;padding:0px;">
			<button class="button button-positive button-full pos-footer-btn" ng-click="saveNote();"><i class="icon ion-plus-circled"></i>{{note_type == 'ORDER'?'Add Note for Driver':'Add Product Note'}}</button>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="customer-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Find Customer</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('CUSTOMER');"></button>
			</div>
        </ion-header-bar>
		<!--<ion-header-bar class="bar-subheader item-input-inset">
		  <label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="search" placeholder="Search customers" ng-model="searchText" ng-virtual-keyboard="kb_config">
		  </label>
		  <button class="button button-stable button-clear" ng-click="searchText=''">Cancel</button>      
		</ion-header-bar>
        <ion-content>
			<div ng-if="selected_customer" class="card">				 
				<label class="item item-divider">
				{{selected_customer.firstname}} {{selected_customer.lastname}} ({{selected_customer.phone}}/{{selected_customer.email}})
				</label>
			</div>
			<div class="card">
				<ion-list>
				  <ion-item dir-paginate="customer in allCustomers | filter:searchText|itemsPerPage:8" ng-click="actionSearchCustomer(customer,'CART')">
					{{::customer.firstname}} {{::customer.lastname}} ({{::customer.phone}}/{{::customer.email}})
				  </ion-item>
				</ion-list>
			</div>
			<dir-pagination-controls max-size="5" direction-links="true" boundary-links="true" ></dir-pagination-controls>
        </ion-content>
		<ion-footer-bar class="bar-light" style="height: 54px;">
			<div class="button-bar">
				<button class="button button-positive" ng-click="openCustomerEditModal(false);closeModal('CUSTOMER');"><i class="icon ion-android-person-add"></i>New Customer</button>
				<button style="margin-left:2px;" class="button button-positive" ng-click="assignCustomer();"><i class="icon ion-plus-circled"></i>Assign</button>
			</div>
		</ion-footer-bar>-->
		<ion-content scroll="false" class="custom-font-style">
		
			<div class="item item-input-inset">
			
				<label class="item-input-wrapper">
				  <input style="height:53px;" ng-model="search_inputs.phone" value="{{search_inputs.phone}}" type="text" placeholder="Search phone number">
				</label>
				<button class="button button-large button-positive" ng-click="quickSearchCustomer(search_inputs.phone,'PHONE',true);">
				  FIND
				</button>
			</div>
			<label style="color:red;font-weight:bold;padding-left:10px;font-size:18px;" ng-if="showErrCust==true">Please Enter a 11 digit phone number, starting with 0</label>
			<div class="padding" style="display:flex;">
				<ng-keypad on-key-pressed='onKeyPressed'>
					<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
					<!--<ng-key ng-key-type='keypad.type' ng-key-data="keypad.data">{{keypad.data}}</ng-key>-->
				</ng-keypad>
			</div>
			<ion-scroll direction="y" style="height:calc(100vh - 390px);" class="padding">
				<div class="list">
				  <ion-item ng-repeat="customer in quickCustomers|limitTo: 10" ng-click="resetLoyaltyFields();actionSearchCustomer(customer,'CART')">
					{{::customer.first_name}} {{::customer.last_name}}({{::customer.billing_address.phone}})
				  </ion-item>
				</div>
			</ion-scroll>
			<!--<dir-pagination-controls max-size="5" direction-links="true" boundary-links="true" ></dir-pagination-controls>-->
        </ion-content>
    </ion-modal-view>
</script>
<script id="view-customer-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">View Customers</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('VIEW_CUSTOMER');"></button>
			</div>
        </ion-header-bar>
		<ion-header-bar class="bar-subheader item-input-inset">
		  <label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="text" placeholder="Search customers" ng-model="search_inputs.customer" ng-change="quickSearchCustomer(search_inputs.customer,'PHONE',false)" ng-focus="setKeyInput('VIEW_CUSTOMER',search_inputs.customer)">
		  </label>
		  <button class="button button-stable button-clear" ng-click="resetViewCustomers()">Cancel</button>      
		</ion-header-bar>
        <ion-content scroll="false" class="has-header has-subheader">
			<div class="row" style="height:100%;">
				<div class="col col-66">
					<ion-scroll direction="y" style="height:calc(100vh - 400px);">
						<div class="list">
						  <ion-item style="padding:10px;" ng-repeat="customer in viewCustomers | limitTo: infiniteLimit" ng-click="actionSearchCustomer(customer,'VIEW')">
							{{::customer.first_name}} {{::customer.last_name}}({{::customer.billing_address.phone}})
						  </ion-item>
						</div>
						<ion-infinite-scroll ng-if="moreDataCanBeLoaded(viewCustomers)" icon="ion-loading-c" on-infinite="loadMore()"></ion-infinite-scroll>
					</ion-scroll>
					<div class="padding col col-66" style="position: absolute; bottom: 0px; padding: 5px 20px 5px 10px;">
						<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
							<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:50%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:25%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:25%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
						</ng-keypad>						
					</div>
				</div>
				<div class="col col-34">
					<ion-scroll direction="y" ng-if="selected_customer" class="customer-list">
						<div class="item item-text-wrap">
							<p>{{selected_customer.first_name}} {{selected_customer.last_name}}</p>
							<p ng-if="selected_customer.email.indexOf('example.com')>-1">{{selected_customer.email}}</p>
							<p>{{selected_customer.billing_address.phone}}</p>
							<p>Total orders : {{selected_customer.orders_count}}</p>
						</div>
						<label class="item item-divider">Billing Address</label>
						<div class="item item-text-wrap">
							<p>{{selected_customer.billing_address.first_name}} {{selected_customer.billing_address.last_name}}</p>
							<p ng-if="selected_customer.billing_address.address_1">{{selected_customer.billing_address.address_1}}</p>
							<p ng-if="selected_customer.billing_address.address_2">{{selected_customer.billing_address.address_2}}</p> 
							<p ng-if="selected_customer.billing_address.city">{{selected_customer.billing_address.city}}</p>
							<p ng-if="selected_customer.billing_address.postcode">{{selected_customer.billing_address.postcode}}</p>
							<p ng-if="selected_customer.billing_address.phone">{{selected_customer.billing_address.phone}}</p>
							<p ng-show="selected_customer.billing_address.email">{{selected_customer.billing_address.email}}</p>
						</div>
						<label class="item item-divider">Delivery Address</label>
						<div class="item item-text-wrap">
							<p>{{selected_customer.shipping_address.first_name}} {{selected_customer.shipping_address.last_name}}</p>
							<p ng-if="selected_customer.shipping_address.address_1">{{selected_customer.shipping_address.address_1}}</p>
							<p ng-if="selected_customer.shipping_address.address_2">{{selected_customer.shipping_address.address_2}}</p> 
							<p ng-if="selected_customer.shipping_address.city">{{selected_customer.shipping_address.city}}</p>
							<p ng-if="selected_customer.shipping_address.state">{{selected_customer.shipping_address.state}}</p>
							<p ng-if="selected_customer.shipping_address.postcode">{{selected_customer.shipping_address.postcode}}</p>
						</div>
						<label ng-if="selected_customer.meta.loyalty_card_id" class="item item-divider">Loyalty</label>
						<div ng-if="selected_customer.meta.loyalty_card_id" class="item item-text-wrap">
							<p>Card No 		: {{selected_customer.meta.loyalty_card_id}}</p>
							<p ng-if="loyalty_dbaccess_status==true">{{selected_customer.reward_points}} Points worth {{aiv_info.currency_symbol+selected_customer.reward_amount}}</p>
							<p ng-if="loyalty_dbaccess_status==false">{{dbAccessMsg}}</p>
							<p>Last reward 	: {{aiv_info.currency_symbol+selected_customer.meta.redeem_amount}}</p>
						</div>
					</ion-scroll>
				</div>
			</div>
        </ion-content>
    </ion-modal-view>
</script>
<script id="messages.html" type="text/ng-template">
    <div class="error assertive" ng-message="required">
        <i class="ion-information-circled"></i> Required!
    </div>
    <div class="error assertive" ng-message="minlength">
        <i class="ion-information-circled"></i> Too short!
    </div>
    <div class="error assertive" ng-message="maxlength">
        <i class="ion-information-circled"></i> Too long!
    </div>
    <div class="error assertive" ng-message="email">
        <i class="ion-information-circled"></i> Invalid Email Address!
    </div>
	<div class="error assertive" ng-message="pattern">
        <i class="ion-information-circled"></i> Invalid PostCode!
    </div>
</script>
<script id="customer-edit-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Customer Details</h1>
			<div class="buttons opt-buttons">
				<div ng-if="!delivery_areas.show&&!post_lookup.show_billing_streets" class="item item-toggle item-dark item-outline"  style="line-height:0px;">Show all info
					<label class="toggle" style="top:1px;">
					   <input ng-model="aiv_toggles.show_customer_extra" type="checkbox">
					   <div class="track">
						 <div class="handle"></div>
					   </div>
					</label>
				</div>
				<button ng-if="!delivery_areas.show&&!post_lookup.show_billing_streets" style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeCustomerEdit();"></button>
			</div>
        </ion-header-bar>
		<form name="customerForm" novalidate="">
			<ion-content scroll="false" class="has-footer customer-form-content">
				<ion-scroll ng-if="delivery_areas.show" direction="y" ng-style="{height:sms_cust_edit_hide_height};">
				<div class="row responsive-sm product-gallery" style="padding:10px;position:absolute;top:10vh;">
					<div class="col col-20" style="padding:0px;" ng-repeat="d_area in delivery_areas.areas track by $index" ng-click="assignDeliveryArea(d_area)">
						<div class="item darea-style" ng-class="{'darea-style-active':delivery_areas.selected==d_area.area}">
							{{d_area.area}} - <span>{{aiv_info.currency_symbol+d_area.amount}}</span>
						</div>
					</div>
				</div>
				</ion-scroll>
				<ion-scroll ng-if="post_lookup.show_billing_streets" direction="y" ng-style="{height:sms_cust_edit_hide_height};">
				<div class="row responsive-sm product-gallery" style="padding:0px;">
					<div style="padding:0px;cursor:pointer;" class="col col-50" ng-repeat="street in post_lookup.billing_street track by $index" ng-click="toggleStreets(true,street);">
						<div class="item">{{street}}</div>		
					</div>
				</div>
				</ion-scroll>
				<ion-scroll ng-if="!delivery_areas.show&&!post_lookup.show_billing_streets" class="custom-font-style" direction="y" style="height:49vh;" delegate-handle="customer_edit_Scroll">
				<div class="list list-inset customer-form" >
					<div ng-show="formNotValid" class="fadein fadeout">
						<h4 class="error assertive">
							<i class="ion-information-circled"></i> Some fields had errors in them
						</h4>
					</div>
					<label ng-if="errors.customer_edit" class="error assertive animated fadeInLeft h4">
						<i class="ion-information-circled"></i> {{errors.customer_edit}}
					</label>
					<div class="row">
						<div class="col">
							<div class="item item-input-inset">
								<span class="input-label">First Name</span>
								<label class="item-input-wrapper">
									<input type="text" name="first_name" placeholder="First Name" ng-focus="setKeyInput('CUSTOMER_EDIT_FNAME',formCustomer.billing_address.first_name)" ng-value='{{"formCustomer.billing_address.first_name"}}' ng-model="formCustomer.billing_address.first_name">
									<div ng-messages="customerForm.first_name.$error" ng-if="customerForm.first_name.$error && customerForm.$submitted">
										<div ng-messages-include="messages.html"></div>
									</div>						
								</label>
							</div>
						</div>
						<div class="col">
							<div class="item item-input-inset">
								<span class="input-label">Last Name</span>
								<label class="item-input-wrapper">
									<input type="text" name="last_name" placeholder="Last Name" ng-focus="setKeyInput('CUSTOMER_EDIT_LNAME',formCustomer.billing_address.last_name)" ng-value='{{"formCustomer.billing_address.last_name"}}' ng-model="formCustomer.billing_address.last_name">
									<div ng-messages="customerForm.last_name.$error" ng-if="customerForm.last_name.$error && customerForm.$submitted">
										<div ng-messages-include="messages.html"></div>
									</div>						
								</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col">
							<div class="item item-input-inset">
								<span class="input-label">Phone</span>
								<label class="item-input-wrapper">
									<input type="text" ng-disabled="true" name="phone" placeholder="Phone" maxlength="11" ng-focus="setKeyInput('CUST_PHONE',formCustomer.billing_address.phone)" ng-value='{{"formCustomer.billing_address.phone"}}' ng-model="formCustomer.billing_address.phone" required>
									<div ng-messages="customerForm.phone.$error" ng-if="customerForm.phone.$error && customerForm.$submitted">
										<div ng-messages-include="messages.html"></div>
									</div>					
								</label>
							</div>
						</div>
						<div class="col">
							<div class="item item-input-inset">
								<span class="input-label">Email</span>
								<label class="item-input-wrapper">
									<input type="email" name="email" placeholder="example@mail.com" ng-focus="setKeyInput('CUST_EDIT_EMAIL',formCustomer.billing_address.email)" ng-value='{{"formCustomer.billing_address.email"}}' ng-model="formCustomer.billing_address.email">
									<div ng-messages="customerForm.email.$error" ng-if="customerForm.email.$error && customerForm.$submitted">
										<div ng-messages-include="messages.html"></div>
									</div>						
								</label>
							</div>
						</div>
					</div>
					<div ng-if="selected_shipping.id=='local_delivery'||aiv_toggles.show_customer_extra">
						<div class="row">
							<div class="col">
								<div class="item item-input-inset">
									<label class="item-input-wrapper">
										<input type="text" name="address_2" placeholder="Area (optional)" ng-focus="setKeyInput('CUST_EDIT_BILLAREA',formCustomer.billing_address.address_2)" ng-value='{{"formCustomer.billing_address.address_2"}}' ng-model="formCustomer.billing_address.address_2" >
										<div ng-messages="customerForm.address_2.$error" ng-if="customerForm.address_2.$error && customerForm.$submitted">
											<div ng-messages-include="messages.html"></div>
										</div>				
									</label>
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset">
									<label class="item-input-wrapper">
										<input type="text" name="address_1" placeholder="House No.,Street Address etc" ng-focus="setKeyInput('CUST_EDIT_BILLSTREET',formCustomer.billing_address.address_1)" ng-value='{{"formCustomer.billing_address.address_1"}}' ng-model="formCustomer.billing_address.address_1">
										<div ng-messages="customerForm.address_1.$error" ng-if="customerForm.address_1.$error && customerForm.$submitted">
											<div ng-messages-include="messages.html"></div>
										</div>					
									</label>
									<button type="button" ng-disabled="!post_lookup.billing_street.length" class="button button-small button-clear" ng-class="{'button-positive':!temppost.count,'button-assertive':temppost.count}" ng-click="post_lookup.show_billing_streets=!post_lookup.show_billing_streets">
										<i class="icon ion-edit"></i>
									</button>
								</div>
							</div>
							<!--<div class="col">
								<label class="item item-input item-select no-border-bottom">
									<div class="input-label">
										Country
									</div>
									<select ng-options="key as data for (key, data) in countries" name="country" ng-model="formCustomer.billing_address.country" required>
										<option value="">-- choose Country --</option>
									</select>
								</label>
								<label class="item item-input no-border-top no-border-bottom" ng-show="sizeOf(customerForm.country.$error) && customerForm.$submitted">
									<div class="input-label">
										<div ng-messages="customerForm.country.$error">
											<div ng-messages-include="messages.html"></div>
										</div>
									</div>
								</label>
							</div>-->
						</div>
						<div class="row">
							<div class="col">
								<div class="item item-input-inset">
									<label class="item-input-wrapper">
										<input type="text" name="city" placeholder="City (optional)" ng-focus="setKeyInput('CUST_EDIT_BILLCITY',formCustomer.billing_address.city)" ng-value='{{"formCustomer.billing_address.city"}}' ng-model="formCustomer.billing_address.city">
										<div ng-messages="customerForm.city.$error" ng-if="customerForm.city.$error && customerForm.$submitted">
											<div ng-messages-include="messages.html"></div>
										</div>						
									</label>
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset">
									<label class="item-input-wrapper">
										<input style="width:100%;" type="text" name="postcode" placeholder="Postcode / ZIP" ng-focus="setKeyInput('CUST_EDIT_BILLCODE',formCustomer.billing_address.postcode)" ng-value='{{"formCustomer.billing_address.postcode"}}' ng-model="formCustomer.billing_address.postcode" ng-change='savePostCode(formCustomer.billing_address.postcode,true)'>
										<div ng-show="errors.bill_postcode" class="error assertive animated fadeInLeft h4 padding-left">
											<i class="ion-information-circled"></i> {{errors.bill_postcode}}
										</div>
									</label>
									<a class="button button-positive" ng-disabled="!post_lookup.billing" ng-click="PostcodeLookup(true,true);">FIND</a>
									<a href="#" ng-disabled="!post_lookup.billing_match.postcode" ng-click="openMaps(post_lookup.billing_match,formCustomer.billing_address.address_2)" class="button  button-assertive">
										<i class="icon ion-paper-airplane"></i>
									</a>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col" ng-if="delivery_areas.areas.length">
								<div class="item item-input-inset">
									<span class="input-label">Delivery Area</span>
									<label class="item-input-wrapper" ng-click="delivery_areas.show=true">
										<input type="text" name="state" placeholder="Delivery Area" ng-value='{{"delivery_areas.value"}}' ng-model="delivery_areas.value" readonly style="cursor:pointer;">
										<div ng-messages="customerForm.state.$error" ng-if="customerForm.state.$error && customerForm.$submitted">
											<div ng-messages-include="messages.html"></div>
										</div>						
									</label>
									<!--<button class="button button-stable button-small button-clear" ng-click="delivery_areas.show=!delivery_areas.show">
										<i class="icon ion-chevron-down"></i>
									</button>-->
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Delivery Charge</span>
									<label class="item-input-wrapper">
										{{aiv_info.currency_symbol}} <input type="text" name="del_charge" placeholder="Delivery Charge" ng-focus="setKeyInput('CUST_EDIT_SHIPCHARGE',formCustomer.del_charge)" ng-value='{{"formCustomer.del_charge"}}' ng-model="formCustomer.del_charge">
										<div ng-messages="customerForm.del_charge.$error" ng-if="customerForm.del_charge.$error && customerForm.$submitted">
											<div ng-messages-include="messages.html"></div>
										</div>						
									</label>
								</div>
							</div>
						</div>
						<div class="row" ng-if="hf_loyalty.enabled">
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Loyalty Card No.</span>
									<label class="item-input-wrapper">
										<input type="text" ng-disabled="true" name="loyalty_card_id" placeholder="Loyalty Card No." ng-focus="setKeyInput('CUSTOMER_LOYCARD',formCustomer.meta.loyalty_card_id)" ng-model="formCustomer.meta.loyalty_card_id">
										<div ng-messages="customerForm.loyalty_card_id.$error" ng-if="customerForm.loyalty_card_id.$error && customerForm.$submitted">
											<div ng-messages-include="messages.html"></div>
										</div>	
									</label>
									<!--<button type="button" class="icon ion-close button button-small" ng-click="formCustomer.meta.loyalty_card_id=''"></button>-->
								</div>
							</div>
						</div>
						<!--<div class="row" ng-show="delivery_areas.show">
							<div class="col">
								<div class="card">
									<ion-list>
									  <ion-item ng-repeat="d_area in delivery_areas.areas track by $index" ng-click="assignDeliveryArea(d_area);">
										{{d_area.area+" : "+aiv_info.currency_symbol+d_area.amount}}
									  </ion-item>
									</ion-list>
								</div>
							</div>
						</div>-->
						<!--<label class="item item-divider no-border-bottom  no-border-top">
							Delivery Address
						</label>
						<li class="item item-checkbox no-border-bottom no-border-top">
							<label class="checkbox">
								<input type="checkbox" ng-checked="formCustomer.sameAddress" ng-model="formCustomer.sameAddress" ng-change='actionShipping();'>
							</label>
							Same as Billing
						</li>
						<div  ng-if="!formCustomer.sameAddress">
							<div class="row">
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">First Name</span>
										<label class="item-input-wrapper">
											<input type="text" name="first_name2" placeholder="First Name" ng-focus="setKeyInput('CUST_EDIT_SHIPFNAME',formCustomer.shipping_address.first_name)" ng-value='{{"formCustomer.shipping_address.first_name"}}' ng-model="formCustomer.shipping_address.first_name" ng-minlength="3">
											<div ng-messages="customerForm.first_name2.$error" ng-if="customerForm.first_name2.$error && customerForm.$submitted">
												<div ng-messages-include="messages.html"></div>
											</div>				
										</label>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">Last Name</span>
										<label class="item-input-wrapper">
											<input type="text" name="last_name2" placeholder="Last Name" ng-focus="setKeyInput('CUST_EDIT_SHIPLNAME',formCustomer.shipping_address.last_name)" ng-value='{{"formCustomer.shipping_address.last_name"}}' ng-model="formCustomer.shipping_address.last_name" ng-minlength="3">
											<div ng-messages="customerForm.last_name2.$error" ng-if="customerForm.last_name2.$error && customerForm.$submitted">
												<div ng-messages-include="messages.html"></div>
											</div>						
										</label>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col">
									<div class="item item-input-inset">
										<label class="item-input-wrapper">
											<input type="text" name="address_12" placeholder="House No.,Street Address etc" ng-focus="setKeyInput('CUST_EDIT_SHIPSTREET',formCustomer.shipping_address.address_1)" ng-value='{{"formCustomer.shipping_address.address_1"}}' ng-model="formCustomer.shipping_address.address_1">
											<div ng-messages="customerForm.address_12.$error" ng-if="customerForm.address_12.$error && customerForm.$submitted">
												<div ng-messages-include="messages.html"></div>
											</div>					
										</label>
										<button class="button button-stable button-small button-clear" ng-click="post_lookup.show_shipping_streets=!post_lookup.show_shipping_streets">
											<i class="icon ion-chevron-down"></i>
										</button>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<label class="item-input-wrapper">
											<input name="address_22" type="text" placeholder="Area (optional)" ng-focus="setKeyInput('CUST_EDIT_SHIPAREA',formCustomer.shipping_address.address_2)" ng-value='{{"formCustomer.shipping_address.address_2"}}' ng-model="formCustomer.shipping_address.address_2">
											<div ng-messages="customerForm.address_22.$error" ng-if="customerForm.address_22.$error && customerForm.$submitted">
												<div ng-messages-include="messages.html"></div>
											</div>				
										</label>
									</div>
								</div>-->
								<!--<div class="col">
									<label class="item item-input item-select no-border-bottom" ng-if="!formCustomer.sameAddress">
										<div class="input-label">
											Country
										</div>
										<select name="country2" ng-options="key as data for (key, data) in countries" ng-model="formCustomer.shipping_address.country" required>
											<option value="">-- choose Country --</option>
										</select>
									</label>
									<label class="item item-input no-border-top no-border-bottom" ng-if="!formCustomer.sameAddress" ng-if="sizeOf(customerForm.country2.$error) && customerForm.$submitted">
										<div class="input-label">
											<div ng-messages="customerForm.country2.$error">
												<div ng-messages-include="messages.html"></div>
											</div>
										</div>
									</label>
								</div>-->
							<!--</div>
							<div class="row" ng-show="post_lookup.show_shipping_streets">
								<div class="col">
									<div class="card">
										<ion-list>
										  <ion-item ng-repeat="street in post_lookup.shipping_street track by $index" ng-click="toggleStreets(false,street);">
											{{street}}
										  </ion-item>
										</ion-list>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col">
									<div class="item item-input-inset">
										<label class="item-input-wrapper">
											<input name="address_23" type="text" placeholder="City (optional)" ng-focus="setKeyInput('CUST_EDIT_SHIPCITY',formCustomer.shipping_address.city)" ng-value='{{"formCustomer.shipping_address.city"}}' ng-model="formCustomer.shipping_address.city">
											<div ng-messages="customerForm.address_23.$error" ng-if="customerForm.address_23.$error && customerForm.$submitted">
												<div ng-messages-include="messages.html"></div>
											</div>						
										</label>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<label class="item-input-wrapper">
											<input style="width:100%;" type="text" name="postcode2" placeholder="Postcode / ZIP" ng-pattern='UKGovPostcodeRegex' ng-focus="setKeyInput('CUST_EDIT_SHIPCODE',formCustomer.shipping_address.postcode)" ng-value='{{"formCustomer.shipping_address.postcode"}}' ng-model="formCustomer.shipping_address.postcode" ng-change='savePostCode(formCustomer.shipping_address.postcode,false)'>
											<div ng-messages="customerForm.postcode2.$error" ng-if="customerForm.postcode2.$error && (customerForm.$submitted || customerForm.$dirty)">
												<div ng-messages-include="messages.html"></div>
											</div>
											<div ng-show="errors.ship_postcode" class="error assertive animated fadeInLeft h4 padding-left">
												<i class="ion-information-circled"></i> {{errors.ship_postcode}}
											</div>
										</label>
										<a class="button button-positive" ng-disabled="!post_lookup.shipping" ng-click="PostcodeLookup(false,true);">FIND</a>
										<a href="#" ng-disabled="!post_lookup.shipping_match.postcode" ng-click="openMaps(post_lookup.shipping_match,formCustomer.shipping_address.address_2)" class="button  button-assertive">
											<i class="icon ion-paper-airplane"></i>
										</a>
									</div>
								</div>
							</div>
						</div>-->
					</div>
				</div>
				</ion-scroll>
				<div class="padding" ng-if="!delivery_areas.show&&!post_lookup.show_billing_streets">
					<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
						<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
						<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
						<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
						<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
						<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>
					</ng-keypad>						
				</div>
			</ion-content>
			<ion-footer-bar class="bar-light" style="height: 45px;padding:0px;">
				<div class="button-bar">
					<button ng-if="cutomer_edit&&!delivery_areas.show&&!post_lookup.show_billing_streets" class="button button-full button-positive pos-footer-btn" ng-click="saveCustomer(customerForm,false,$event)" ng-disabled="!spinDisabled"><i class="icon ion-close"></i>No Changes</button>
					<button ng-if="delivery_areas.show||post_lookup.show_billing_streets" class="button button-full button-positive pos-footer-btn" ng-click="showCustomerInfo();"><i class="icon ion-arrow-return-left"></i> Back</button>
					<button ng-if="cutomer_edit&&!delivery_areas.show&&!post_lookup.show_billing_streets" style="margin-left:2px!important;" class="button button-full button-calm pos-footer-btn" ng-click="saveCustomer(customerForm,false,$event,true)" ng-disabled="!spinDisabled">Temporary Address</button>
					<button ng-if="!delivery_areas.show&&!post_lookup.show_billing_streets" style="margin-left:2px!important;" class="button button-full button-positive pos-footer-btn" ng-click="saveCustomer(customerForm,true,$event)" ng-disabled="!spinDisabled"><i class="icon ion-checkmark"></i>Save</button>
				</div>
			</ion-footer-bar>
		</form>
    </ion-modal-view>
</script>
<script id="view-order-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">View Orders</h1>
			<div class="buttons opt-buttons" ng-hide="order_view.view=='DRIVER_LIST'">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('VIEW_ORDER',true);"></button>
			</div>
        </ion-header-bar>
		<ion-header-bar class="bar-subheader item-input-inset" ng-show="order_view.view=='ORDERS'">
			<div class="button-bar order-list-header">
				<button class="button button-positive icon ion-android-bicycle" ng-click="showDeliveryDrivers()" title="Assign Drivers"></button>
				<button class="button button-balanced icon ion-printer " ng-click="printPayoffReceipt(selectedOrders.orders,'MULTI_PRINT',false);"></button>
				<button class="button button-royal icon ion-cash " ng-click="editOrder('MARK_AS_PAID');"></button>
				<label class="button button-light button-clear group-total">{{selectedOrders.total | currency:"£ ":2}}</label>
			</div>
			<label class="item item-input item-select aiv-select" style="margin-right:10px;">
				<select ng-model="driver_select" ng-init="driver_select=temp_drivers[0]" ng-options="driver.name for driver in temp_drivers track by driver.id" ng-change="getDriverOrders(driver_select);"></select>
			</label>
			<label class = "item item-input item-select aiv-select" style="margin-right:10px;">
				<select ng-model="option_select" ng-init="option_select=order_status[0]" ng-options="status for status in order_status" ng-change="showUnpaidOrders(option_select);"></select>
			</label>
			<label class="item-input-wrapper fixed-width-20">
				<i class="icon ion-ios-search placeholder-icon"></i>
				<input type="search" placeholder="Search order" ng-model="searchText" ng-focus="processOrderOptions(shownDetails);" ng-virtual-keyboard="kb_config">
			</label>
			<button class="button button-stable button-icon icon ion-backspace button-clear" ng-click="searchText='';option_select=order_status[0];"></button> 
		</ion-header-bar>
        <ion-content scroll="false" class="has-header has-footer" ng-class="{'has-subheader':order_view.view=='ORDERS'}">
			<ion-scroll ng-show="order_view.view=='DRIVER_LIST'" direction="y" style="height:100%;">
				<div class="row responsive-sm product-gallery" style="padding:10px;">
					<div class="col col-20" style="padding:0px;cursor:pointer;" ng-repeat="driver in delivery_drivers.drivers track by $index" ng-click="setSelectedDriver(driver)">
						<div class="item darea-style" ng-class="{'darea-style-active':delivery_drivers.selected==driver.name}">
							{{driver.name}}
						</div>
					</div>
				</div>
			</ion-scroll>
			<ion-scroll ng-show="order_view.view=='ORDERS'" direction="y" style="height:100%;">
			<div class="card" style="margin: 0 10px;">
				<label class="item item-divider row">
					<div class="col col-5" style="margin-left:1%;"></div>
					<div class="col text-center col-20">Order</div>
					<div class="col text-center col-20">Date</div>
					<div class="col text-center col-10">Total</div>
					<div class="col text-center col-20">Status</div>
					<div class="col text-center col-25"></div>
				</label>
			</div>
			<ion-list >
				<div dir-paginate="order in (orderFilterType !='UNPAID'?allOrders:orderFilterArray) | orderBy:[orderSortFunc]:true | filter:searchText|itemsPerPage:8 track by order._id" current-page="pagination.current" class="card" style="margin: 0 10px;">
					<ion-item class="item-stable row item-text-wrap"
							ng-click="processOrderOptions(order)"
							ng-class="{active: isDetailsShown(order)}" style="font-size:17px;font-weight:400;">
						<div style="margin-left:1%;" class="col-center"><i class="icon positive" ng-class="isDetailsShown(order) ? 'ion-minus' : 'ion-plus'"></i></div>
						<div class="col col-5 col-center" style="padding:0;"><ion-checkbox style="padding-left: 30px;background-color:transparent;" ng-model="order.selected" ng-click="showTotal('CHECK',order);$event.stopPropagation();"></ion-checkbox></div>
						<div ng-if="order.data.billing_address.first_name" class="col col-20 col-center">#{{order.data.order_meta.daily_order_no?order.data.order_meta.daily_order_no:order.data.order_meta.bill_number}}<span ng-if="order.data.shipping_methods=='Sit-In'">/TB {{order.data.order_meta.sitin_table}}</span> by {{::order.data.billing_address.first_name}} {{::order.data.billing_address.last_name}}
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)" ng-show="order.data.id"><br>Ref No:{{::order.data.id}}</span>
						</div>
						<div ng-if="!order.data.billing_address.first_name" class="col col-20 col-center">#{{order.data.order_meta.daily_order_no?order.data.order_meta.daily_order_no:order.data.order_meta.bill_number}}<span ng-if="order.data.shipping_methods=='Sit-In'">/TB {{order.data.order_meta.sitin_table}}</span> by Walk-in-Customer
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)" ng-show="order.data.id"><br>Ref No:{{::order.data.id}}</span>
						</div>
						<div class="col col-20 text-center col-center">{{::order.data.created_at | date:'MMM d, y h:mm a'}}</div>
						<div class="col col-10 text-center col-center">{{::order.data.total | currency:"£ ":2}}</div>
						<div class="col col-20 text-center col-center">
							<span class="text-aiv-{{order.data.status}}">{{order.data.order_meta.driver&&order.data.status=='on-hold'?'assigned':order.data.status}}</span>
							<div ng-if="order.data.order_meta.driver"><span class="positive">({{order.data.order_meta.driver}}) </span><i style="font-size: 30px;" class="icon assertive ion-android-bicycle"></i></div>
						</div>
						<div class="col col-25 text-center col-center">
							<button ng-hide="order.data.status=='pending'||order.data.status=='processing'" class="button button-balanced icon ion-printer bar-button" title="Print receipt" ng-click="printReceipt(order.data,false,false);$event.stopPropagation();"></button>
							<button ng-if="order.data.status=='pending'||order.data.status=='processing'" class="button button-assertive icon ion-ios-download bar-button" title="Load Order" ng-click="loadOrder(order);closeModal('VIEW_ORDER');$event.stopPropagation();"></button>
							<button ng-if="(order.data.status=='on-hold'||order.data.status=='completed')&&!order.data.payment_details.paid" class="button button-assertive icon ion-edit bar-button" title="Edit Order" ng-click="editOrder('EDIT_ORDER',order);closeModal('VIEW_ORDER');$event.stopPropagation();"></button>
							<!--<button ng-if="order.data.status=='completed'||order.data.status=='refunded'||order.data.status=='kitchen-ready'||order.data.status=='cancelled'" ng-disabled="loginInfo.role=='user'" class="button button-assertive button-outline icon ion-close bar-button" title="Remove order" ng-click="removeOrder(order);$event.stopPropagation();"></button>-->
							<button ng-if="order.data.status=='on-hold'||order.data.status=='kitchen-ready'" ng-disabled="payDisabled" class="button button-positive icon ion-android-checkmark-circle bar-button" title="Mark as Complete" ng-click="updatePaidStatus(order,false);$event.stopPropagation();"></button>
							<button ng-if="(order.data.status=='completed'||order.data.status=='on-hold'||order.data.status=='kitchen-ready')&&!order.data.payment_details.paid" ng-disabled="payDisabled" class="button button-royal icon ion-cash bar-button" title="Pay order" ng-click="editOrder('MARK_AS_PAID',order);$event.stopPropagation();"></button>
							<button ng-if="(order.data.status=='completed'||order.data.status=='on-hold'||order.data.status=='kitchen-ready')&&order.data.payment_details.paid" class="button button-positive icon ion-ios-undo bar-button" title="Refund" ng-click="updateRefundStatus(order,false);$event.stopPropagation();"></button>
							<button ng-show="(!order._id.startsWith('AIVOOT') && order.data.status=='pending')" ng-disabled="loginInfo.role=='user'" class="button button-assertive button-outline icon ion-close bar-button" title="Remove order" ng-click="removeSavedOrder(order);$event.stopPropagation();"></button>
						</div>
					</ion-item>
					<ion-item class="item-accordion" ng-show="isDetailsShown(order)">
						<div class="card" style="margin-bottom:0px;">
							<label style="font-weight:500;background-color:#f5f5f5;padding: 5px;font-size: 20px;" class="item text-center">
								<span ng-if="order.data.status=='refunded'" class="assertive">REFUNDED |</span>
								<span ng-class="order.data.payment_details.paid?'balanced':'assertive'">{{order.data.payment_details.paid?'PAID':'UNPAID'}} </span>
								| {{order.data.payment_details.method_id=='cod'?(order.data.shipping_methods&&order.data.shipping_methods!='Sit-In'?(order.data.shipping_lines[0].method_id=='local_delivery'?'Cash on Delivery':'Cash on Collection'):'Cash'):order.data.payment_details.method_title}} | 
								{{order.data.order_meta.driver }} 
								<i style="font-size: 30px;" class="icon assertive" ng-class="order.data.shipping_methods?(order.data.shipping_lines[0].method_id!='sitin'?(order.data.shipping_lines[0].method_id=='local_delivery'?'ion-android-bicycle':'ion-bag'):'ion-android-checkbox-blank'):'ion-home'"></i> 
								<p class="item-note">{{order._id.split('_order_')[0]=='AIVOOT'?'ONLINE':order._id.split('_order_')[0]}}</p>
							</label>
							<label class="item item-divider row">
								<div class="col col-33">Billing Details</div>
								<div class="col col-33">Delivery Details</div>
							</label>
							<label class="item row">
								<div class="col col-33">
									<p>{{::order.data.billing_address.first_name}} {{::order.data.billing_address.last_name}}</p>
									<p>{{::order.data.billing_address.address_1}}</p>
									<p ng-if="order.data.billing_address.address_2">{{::order.data.billing_address.address_2}}</p> 
									<p ng-if="order.data.billing_address.city">{{::order.data.billing_address.city}}</p>
									<p>{{::order.data.billing_address.postcode}}</p>
									<p ng-if="order.data.billing_address.phone">{{::order.data.billing_address.phone}}</p>
									<p ng-show="order.data.billing_address.email">{{::order.data.billing_address.email}}</p>
								</div>
								<div class="col col-33">
									<p>{{::order.data.shipping_address.first_name}} {{::order.data.shipping_address.last_name}}</p>
									<p>{{::order.data.shipping_address.address_1}}</p>
									<p ng-if="order.data.shipping_address.address_2">{{::order.data.shipping_address.address_2}}</p> 
									<p ng-if="order.data.shipping_address.city">{{::order.data.shipping_address.city}}</p>
									<p ng-if="order.data.shipping_address.state">{{::order.data.shipping_address.state}}</p>
									<p>{{::order.data.shipping_address.postcode}}</p>
								</div>
								<div class="col col-33">
									<div class="item-text-wrap">Driver Note : {{::order.data.note}}</div>
									<div class="item-text-wrap">Refund Reason : {{::order.data.order_meta.reason}}</div>
								</div>
							</label>
						</div>
						<div class="card" style="margin-top:0px;">
							<label class="item item-divider row">
								<div class="col col-67">Order Items</div>
								<div class="col">Qty</div>
								<div class="col">Price</div>
								<div class="col">Total</div>
							</label>
							<ion-list >
								<ion-item class="item item-text-wrap pos-cart" ng-repeat="product in ::order.data.line_items track by $index">
									<div class="row responsive-sm product-gallery">
										<div class="col col-67 col-center">
											<span ng-if="product.title">{{::product.title}}</span><span ng-if="product.name">{{::product.name}}</span>
											<p ng-if="product.title"><span ng-repeat="(key, value) in ::product.attributestoshow track by $index">{{::key | split:'###':0 | split:'_':0}},</span></p>
											<p ng-if="product.name"><span ng-repeat="attr in ::product.meta">{{attr.value | split:'###':0}},</span></p>
											<p ng-if="product.notes">{{product.notes}}</p>
										</div>
										<div class="col col-center">{{::product.quantity}}</div>
										<div class="col col-center " >{{product.subtotal/product.quantity | currency:"£":2}}</div>
										<div class="col col-center ">{{::product.subtotal | currency:"£":2}}</div>
									</div>
								</ion-item>	
							</ion-list>
							<label class="item item-divider">
								<div class="row" ng-if="order.data.total_discount!=0">
									<div class="col col-80"></div>
									<div class="col col-10">Discount : </div>
									<div class="col col-10">{{::order.data.total_discount | currency:"£ ":2}}</div>
								</div>
								<div class="row" ng-if="order.data.total_shipping!=0">
									<div class="col col-80"></div>
									<div class="col col-10">Delivery : </div>
									<div class="col col-10">{{::order.data.total_shipping | currency:"£ ":2}}</div>
								</div>
								<div class="row" ng-if="order.data.fee_lines.length" ng-repeat="fee_type in order.data.fee_lines">
									<div class="col col-80"></div>
									<div class="col col-10">{{fee_type.title}} : </div>
									<div class="col col-10">{{::fee_type.total | currency:"£ ":2}}</div>
								</div>
								<div class="row">
									<div class="col col-80"></div>
									<div class="col col-10">Total 	 : </div>
									<div class="col col-10" ng-class="order.data.status=='refunded'?'aiv-line-through':''">{{::order.data.total | currency:"£ ":2}}</div>
								</div>
							</label>
						</div>
					</ion-item>
				</div>
			</ion-list>
			<dir-pagination-controls max-size="10" direction-links="true" boundary-links="true" ></dir-pagination-controls>
			</ion-scroll>
	    </ion-content>
		<ion-footer-bar class="bar-light" style="padding: 0 0 2px 0;">
			<div class="button-bar" ng-show="order_view.view=='ORDERS'">
				<a class="button button-positive button-outline" ng-click="getAllOrders('POS');driver_select=temp_drivers[0];" ng-class="{'active': showOnlineOrders=='POS'}">POS</a>
				<a class="button button-positive button-outline" ng-click="getAllOrders('WEB');driver_select=temp_drivers[0];" ng-class="{'active': showOnlineOrders=='WEB'}">Online</a>
				<a class="button button-positive button-outline" ng-click="getAllOrders('COLLECTION');driver_select=temp_drivers[0];" ng-class="{'active': showOnlineOrders=='COLLECTION'}">Collection</a>
				<a class="button button-positive button-outline" ng-click="getAllOrders('DELIVERY');driver_select=temp_drivers[0];" ng-class="{'active': showOnlineOrders=='DELIVERY'}">Delivery</a>
				<a class="button button-positive button-outline" ng-click="getAllOrders('INSHOP');driver_select=temp_drivers[0];" ng-class="{'active': showOnlineOrders=='INSHOP'}">Takeaway</a>
				<a class="button button-positive button-outline" ng-if="POSSettings.enable_sitin" ng-click="getAllOrders('SITIN');driver_select=temp_drivers[0];" ng-class="{'active': showOnlineOrders=='SITIN'}">Sit-In</a>
			</div>
			<div class="button-bar" ng-show="order_view.view=='DRIVER_LIST'">
				<button class="button button-full button-positive pos-footer-btn" ng-click="back2Order('ORDERS');"><i class="icon ion-arrow-return-left"></i> Back</button>
		 		<button style="margin-left:2px!important;" class="button button-full button-positive pos-footer-btn" ng-click="assignDeliveryDriver()" ng-disabled="spinDisabled"><i class="icon ion-checkmark"></i> Assign</button>
			</div>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="view-pending-order-modal.html" type="text/ng-template">
    <ion-modal-view  class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Orders</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('VIEW_PENDING_ORDER');"></button>
			</div>
        </ion-header-bar>
		<ion-header-bar class="bar-subheader item-input-inset">
		  <label class = "item item-input item-select aiv-select" style="margin-right:10px;">
			<select ng-model="option_select" ng-init="option_select=pending_order_status[0]" ng-options="status for status in pending_order_status" ng-change="option_select=='All'?searchText='':searchText=option_select"></select>
		  </label>
		  <label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="search" placeholder="Search order" ng-model="searchText" ng-virtual-keyboard="kb_config">
		  </label>
		  <button class="button button-stable button-clear" ng-click="searchText='';option_select=pending_order_status[0];">Cancel</button>      
		</ion-header-bar>
        <ion-content>
			<div class="card" style="margin: 0 10px;">
				<label class="item item-divider row">
					<div style="margin-left:1%;"></div>
					<div class="col col-25">Order</div>
					<div class="col text-center col-20">Date</div>
					<div class="col text-center col-10">Total</div>
					<div class="col text-center col-20">Status</div>
					<div class="col text-center col-25"></div>
				</label>
			</div>
			<ion-list >
				<div dir-paginate="order in pendingOrders | orderBy:[orderSortFuncDate,orderSortFunc]:true | filter:searchText|itemsPerPage:8 track by order._id" class="card" style="margin: 0 10px;">
					<ion-item class="item-stable row item-text-wrap"
							ng-click="processOrderOptions(order)"
							ng-class="{active: isDetailsShown(order)}" style="font-size:17px;font-weight:400;">
						<div class="col-center" style="padding:0;"><i class="icon positive" ng-class="isDetailsShown(order) ? 'ion-minus' : 'ion-plus'"></i></div>
						<div class="col col-25 col-center" ng-if="order.data.billing_address.first_name">
							#<span ng-if="order.data.order_meta.daily_order_no">{{order.data.order_meta.daily_order_no}}</span>
							<span ng-if="!order.data.order_meta.daily_order_no">{{order.data.id}}</span> by {{order.data.billing_address.first_name}} {{order.data.billing_address.last_name}}
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)"><br>{{order.data.order_meta.bill_number}}</span>
						</div>
						<div class="col col-25 col-center" ng-if="!order.data.billing_address.first_name">
							#<span ng-if="order.data.order_meta.daily_order_no">{{order.data.order_meta.daily_order_no}}</span>
							<span ng-if="!order.data.order_meta.daily_order_no">{{order.data.id}}</span> by Walk-in-Customer
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)"><br>{{order.data.order_meta.bill_number}}</span>
						</div>
						<div class="col col-20 text-center col-center">{{order.data.created_at | date:'MMM d, y h:mm a'}}</div>
						<div class="col col-10 text-center col-center">{{order.data.total | currency:"£ ":2}}</div>
						<div class="col col-20 text-center col-center text-aiv-{{order.data.status}}">{{order.data.status}}</div>
						<div class="col col-25 col-center">
							<!--<button ng-show="terminalData.type!='FRONT' || (terminalData.type=='FRONT' && !order.data.payment_details.paid)" class="button button-assertive icon ion-ios-download bar-button" title="Load Order" ng-click="loadPendingOrder(order);closeModal('VIEW_PENDING_ORDER');"></button>-->
							<button class="button button-assertive icon ion-ios-download bar-button" title="Load Order" ng-click="loadPendingOrder(order);closeModal('VIEW_PENDING_ORDER');$event.stopPropagation();"></button>
							<button ng-show="terminalData.type=='FRONT' && order.data.payment_details.paid && (order.data.status=='on-hold'||order.data.status=='kitchen-ready')" ng-disabled="payDisabled" class="button button-positive icon ion-android-checkmark-circle bar-button" title="Mark as Complete" ng-click="updatePaidStatus(order,false);$event.stopPropagation();"></button>
						</div>
					</ion-item>
					<ion-item class="item-accordion" ng-show="isDetailsShown(order)">
						<div class="card" style="margin-bottom:0px;">
							<label style="font-weight:500;background-color:#f5f5f5;padding: 5px;font-size: 20px;" class="item text-center">
								<span ng-class="order.data.payment_details.paid?'balanced':'assertive'">{{order.data.payment_details.paid?'PAID':'UNPAID'}} </span>
								| {{order.data.payment_details.method_id=='cod'&&order.data.shipping_methods?(order.data.shipping_lines[0].method_id=='local_delivery'?'Cash on Delivery':'Cash on Collection'):order.data.payment_details.method_title}} | 
								<i style="font-size: 30px;" class="icon assertive" ng-class="order.data.shipping_methods?(order.data.shipping_lines[0].method_id=='local_delivery'?'ion-android-bicycle':'ion-bag'):'ion-home'"></i>
							</label>
							<label class="item item-divider row">
								<div class="col col-33">Billing Details</div>
								<div class="col col-33">Delivery Details</div>
							</label>
							<label class="item row">
								<div class="col col-33">
									<p>{{::order.data.billing_address.first_name}} {{::order.data.billing_address.last_name}}</p>
									<p>{{::order.data.billing_address.address_1}}</p>
									<p ng-if="order.data.billing_address.address_2">{{::order.data.billing_address.address_2}}</p> 
									<p ng-if="order.data.billing_address.city">{{::order.data.billing_address.city}}</p>
									<p>{{::order.data.billing_address.postcode}}</p>
									<p ng-if="order.data.billing_address.phone">{{::order.data.billing_address.phone}}</p>
									<p ng-show="order.data.billing_address.email">{{::order.data.billing_address.email}}</p>
								</div>
								<div class="col col-33">
									<p>{{::order.data.shipping_address.first_name}} {{::order.data.shipping_address.last_name}}</p>
									<p>{{::order.data.shipping_address.address_1}}</p>
									<p ng-if="order.data.shipping_address.address_2">{{::order.data.shipping_address.address_2}}</p> 
									<p ng-if="order.data.shipping_address.city">{{::order.data.shipping_address.city}}</p>
									<p ng-if="order.data.shipping_address.state">{{::order.data.shipping_address.state}}</p>
									<p>{{::order.data.shipping_address.postcode}}</p>
								</div>
								<div class="col col-33">
									<div class="item-text-wrap">Driver Note : {{::order.data.note}}</div>
								</div>
							</label>
						</div>
						<div class="card" style="margin-top:0px;">
							<label class="item item-divider row">
								<div class="col col-67">Order Items</div>
								<div class="col">Qty</div>
								<div class="col">Price</div>
								<div class="col">Total</div>
							</label>
							<ion-list >
								<ion-item class="item item-text-wrap pos-cart" ng-repeat="product in ::order.data.line_items track by $index">
									<div class="row responsive-sm product-gallery">
										<div class="col col-67 col-center">
											<span ng-if="product.title">{{::product.title}}</span><span ng-if="product.name">{{::product.name}}</span>
											<p ng-if="product.title"><span ng-repeat="(key, value) in ::product.attributestoshow track by $index">{{::key | split:'###':0 | split:'_':0}},</span></p>
											<p ng-if="product.name"><span ng-repeat="attr in ::product.meta">{{attr.key | split:'###':0 | split:'_':0}} - {{attr.value | split:'###':0}}</p>
										</div>
										<div class="col col-center">{{::product.quantity}}</div>
										<div class="col col-center " >{{product.subtotal/product.quantity | currency:"£":2}}</div>
										<div class="col col-center ">{{::product.subtotal | currency:"£":2}}</div>
									</div>
								</ion-item>	
							</ion-list>
							<label class="item item-divider">
								<div class="row" ng-if="order.data.total_discount!=0">
									<div class="col col-80"></div>
									<div class="col col-10">Discount : </div>
									<div class="col col-10">{{::order.data.total_discount | currency:"£ ":2}}</div>
								</div>
								<div class="row" ng-if="order.data.total_shipping!=0">
									<div class="col col-80"></div>
									<div class="col col-10">Delivery : </div>
									<div class="col col-10">{{::order.data.total_shipping | currency:"£ ":2}}</div>
								</div>
								<div class="row" ng-if="order.data.fee_lines.length" ng-repeat="fee_type in order.data.fee_lines">
									<div class="col col-80"></div>
									<div class="col col-10">{{fee_type.title}} : </div>
									<div class="col col-10">{{::fee_type.total | currency:"£ ":2}}</div>
								</div>
								<div class="row">
									<div class="col col-80"></div>
									<div class="col col-10">Total 	 : </div>
									<div class="col col-10">{{::order.data.total | currency:"£ ":2}}</div>
								</div>
							</label>
						</div>
					</ion-item>
				</div>
			</ion-list>
			<dir-pagination-controls max-size="10" direction-links="true" boundary-links="true" ></dir-pagination-controls>
        </ion-content>
    </ion-modal-view>
</script>
<script id="view-kitchen-order-modal.html" type="text/ng-template">
    <ion-modal-view  class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Kitchen Orders</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('VIEW_KITCHEN_ORDER');"></button>
			</div>
        </ion-header-bar>
		<ion-header-bar class="bar-subheader item-input-inset">
		  <label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="search" placeholder="Search order" ng-model="searchText" ng-virtual-keyboard="kb_config">
		  </label>
		  <button class="button button-stable button-clear" ng-click="searchText='';">Cancel</button>      
		</ion-header-bar>
        <ion-content>
			<div class="card" style="margin: 0 10px;">
				<label class="item item-divider row">
					<div style="margin-left:1%;"></div>
					<div class="col col-25">Order</div>
					<div class="col col-10">Purchased</div>
					<div class="col col-25">Ship to</div>
					<div class="col col-10">Date</div>
					<div class="col col-10">Total</div>
					<div class="col col-10">Status</div>
					<div class="col col-10"></div>
				</label>
			</div>
			<ion-list >
				<div dir-paginate="order in kitchenReadyOrders | filter:searchText|itemsPerPage:8 track by order._id" class="card" style="margin: 0 10px;">
					<ion-item class="item-stable row item-text-wrap">
						<div class="col col-25 col-center" ng-if="order.data.billing_address.first_name">
							#<span ng-if="order.data.order_meta.daily_order_no">{{order.data.order_meta.daily_order_no}}</span>
							<span ng-if="!order.data.order_meta.daily_order_no">{{order.data.id}}</span> by {{order.data.billing_address.first_name}} {{order.data.billing_address.last_name}} ({{order.data.billing_address.email}})
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)"><br>{{order.data.order_meta.bill_number}}</span>
						</div>
						<div class="col col-25 col-center" ng-if="!order.data.billing_address.first_name">
							#<span ng-if="order.data.order_meta.daily_order_no">{{order.data.order_meta.daily_order_no}}</span>
							<span ng-if="!order.data.order_meta.daily_order_no">{{order.data.id}}</span> by Walk-in-Customer
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)"><br>{{order.data.order_meta.bill_number}}</span>
						</div>
						<div class="col col-10 col-center">{{order.data.total_line_items_quantity}} items</div>
						<div class="col col-25 col-center">
							<div ng-show="order.data.shipping_address.first_name">{{order.data.shipping_address.first_name}} {{order.data.shipping_address.last_name}},{{order.data.shipping_address.address_1}}
								<span ng-show="order.data.shipping_address.address_2">{{order.data.shipping_address.address_2}}</span> 
								<span ng-show="order.data.shipping_address.city">{{order.data.shipping_address.city}}</span>
								,{{order.data.shipping_address.postcode}}<br>
								Via {{order.data.shipping_methods}}
							</div>
						</div>
						<div class="col col-10 col-center">{{order.data.created_at | date:'medium'}}</div>
						<div class="col col-10 col-center">{{order.data.total | currency:"£ ":2}}<br>{{order.data.payment_details.paid?'Paid':'Unpaid'}},{{order.data.payment_details.method_title}}</div>
						<div class="col col-10 col-center text-aiv-{{order.data.status}}">{{order.data.status}}</div>
						<div class="col col-10 col-center">
							<button ng-if="order.data.status=='kitchen-ready'" ng-disabled="payDisabled" class="button button-positive icon ion-android-checkmark-circle bar-button" title="Mark as Complete" ng-click="updatePaidStatus(order,false);"></button>
						</div>
					</ion-item>
				</div>
			</ion-list>
			<dir-pagination-controls max-size="10" direction-links="true" boundary-links="true" ></dir-pagination-controls>
        </ion-content>
    </ion-modal-view>
</script>
<script id="view-table-order-modal.html" type="text/ng-template">
    <ion-modal-view  class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Table Orders</h1>
			<div class="buttons opt-buttons">
				<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('VIEW_TABLE_ORDER');"></button>
			</div>
        </ion-header-bar>
		<ion-header-bar class="bar-subheader item-input-inset">
		  <label class="item-input-wrapper">
			<i class="icon ion-ios-search placeholder-icon"></i>
			<input type="search" placeholder="Search order" ng-model="searchText" ng-virtual-keyboard="kb_config">
		  </label>
		  <button class="button button-clear" ng-click="searchText='';">Cancel</button>      
		</ion-header-bar>
        <ion-content>
			<div class="card" style="margin: 0 10px;">
				<label class="item item-divider row">
					<div style="margin-left:1%;"></div>
					<div class="col col-25">Order</div>
					<div class="col col-10">Quantity</div>
					<div class="col col-20">Date</div>
					<div class="col col-20">Total</div>
					<div class="col col-10">Status</div>
					<div class="col"></div>
				</label>
			</div>
			<ion-list >
				<div dir-paginate="order in unpaidTableOrders | filter:searchText|itemsPerPage:8 track by order._id" class="card" style="margin: 0 10px;">
					<ion-item class="item-stable row item-text-wrap">
						<div class="col col-25 col-center" ng-if="order.data.billing_address.first_name">
							#<span ng-if="order.data.order_meta.daily_order_no">{{order.data.order_meta.daily_order_no}}</span>
							<span ng-if="!order.data.order_meta.daily_order_no">{{order.data.id}}</span> by {{order.data.billing_address.first_name}} {{order.data.billing_address.last_name}} ({{order.data.billing_address.email}})
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)"><br>{{order.data.order_meta.bill_number}}</span>
						</div>
						<div class="col col-25 col-center" ng-if="!order.data.billing_address.first_name">
							#<span ng-if="order.data.order_meta.daily_order_no">{{order.data.order_meta.daily_order_no}}</span>
							<span ng-if="!order.data.order_meta.daily_order_no">{{order.data.id}}</span> by Walk-in-Customer
							<span style="font-size: 0.8em;color: rgba(0,0,0,0.7)"><br>{{order.data.order_meta.bill_number}}</span>
						</div>
						<div class="col col-10 col-center">{{order.data.total_line_items_quantity}} items</div>
						<div class="col col-20 col-center">{{order.data.created_at | date:'medium'}}</div>
						<div class="col col-20 col-center">{{order.data.total | currency:"£ ":2}}<br>{{order.data.payment_details.paid?'Paid':'Unpaid'}},{{order.data.payment_details.method_title}}</div>
						<div class="col col-10 col-center text-aiv-{{order.data.status}}">{{order.data.status}}</div>
						<div class="col col-center">
							<button ng-if="order.data.status=='on-hold'" ng-disabled="payDisabled" class="button button-positive icon ion-android-checkmark-circle bar-button" title="Mark as Complete" ng-click="updatePaidStatus(order,false);"></button>
							<button ng-if="order.data.status=='on-hold'" class="button button-assertive icon ion-edit bar-button" title="Edit Order" ng-click="editOrder(order);closeModal('VIEW_TABLE_ORDER');$event.stopPropagation();"></button>
						</div>
					</ion-item>
				</div>
			</ion-list>
			<dir-pagination-controls max-size="10" direction-links="true" boundary-links="true" ></dir-pagination-controls>
        </ion-content>
    </ion-modal-view>
</script>
<script id="settings-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">{{menu_settings.active}}</h1>
			<div class="buttons opt-buttons">
				<button ng-show="menu_settings.show_save" class="button button-positive" ng-click="saveSettings();"><i class="icon ion-checkmark"></i> Done</button>
				<button ng-show="settings_close" style="margin-left:15px;" class="button button-icon ion-close-circled" ng-click="closeModal('POS_SETTINGS');"></button>
			</div>
        </ion-header-bar>
        <ion-content>
			<div class="row" ng-show="menu_settings.active=='Settings'" style="padding: 0px 5px;">
				<div class="col col-25" style="border-right:1px solid #ddd;padding:0px;">
					<ion-list>
						<ion-radio name="settings_type" ng-change="resetSettingsErr();" ng-model="aiv_settings.selected" ng-value="type.id" ng-repeat="type in ::aiv_settings.types">{{type.name}}</ion-radio>
					</ion-list>
				</div>
				<div class="col col-75" style="padding: 0px 5px;">
					<div ng-show="settings_error.err" class="error assertive animated fadeInLeft h4 padding-left" style="margin:5px;">
						<i class="ion-information-circled"></i> {{settings_error.err}}
					</div>
					<div ng-show="aiv_settings.selected==='TERMINAL'">
						<div class="row">
							<div class="col col-50 col-center">
								<ion-select ng-id="2" config="kb_custom_config" label="Select terminal" label-field="name" provider="aivTerminals" placeholder-icon="ion-search" on-ionselect="onTerminalSelect(args)" ng-model="settings_data.terminal.name"/>
							</div>
							<div class="col col-40 col-center">
								<div class="input-label" style="width:100%;">Select type</div>
								<div class="item item-input-inset">
									<label class="item-select aiv-select">
										<select ng-model="settings_data.terminal.type" ng-options="type.id as type.name for type in term_types" ng-change=""></select>
									</label>
								</div>
							</div>
							<div class="col col-10 col-bottom">
								<button class="button button-positive aiv-button-round" title="Create Terminal" ng-click="confirmTerminal();"><i class="icon ion-plus"></i></button>
							</div>
						</div>
						<div class="card">
							<label class="item item-divider">Current Terminal is {{terminalData.name}} ({{terminalData.type}}) </label>
						</div>
						<div class="item item-input-inset callerid">
							<div class="input-label">Set Master Terminal</div>
							<label class="item-select aiv-select">
								<select ng-model="settings_data.pos_settings.master_terminal" ng-options="terminal.name as terminal.name for terminal in user_terminals">
									<option value="">---Select terminal---</option>
								</select>
							</label>
						</div>
						<div ng-show="settings_data.terminal.type=='BACK'" class="item item-input-inset callerid">
							<div class="input-label">Set back terminal for</div>
							<label class="item-select aiv-select">
								<select ng-options="option.name for option in settings_data.templates.options track by option.id" ng-model="settings_data.templates.selected"></select>
							</label>
						</div>
						<div class="item item-input-inset callerid">
							<div class="input-label">Set Order type</div>
							<label class="item-select aiv-select">
								<select ng-model="settings_data.order_type" ng-options="type.title as type.title for type in shipping_methods">
									<option value="">---Select order type---</option>
								</select>
							</label>
						</div>
						<div ng-show="(settings_data.terminal.type!='KITCHEN' && settings_data.terminal.type!='BACK') || (settings_data.terminal.type=='BACK'&&backTemplate.id!='MPOS')" class="item item-toggle" >
							Show all terminals orders in order history
							<label class="toggle">
								<input ng-model="orderlistSettings.view_all" type="checkbox">
								<div class="track">
									<div class="handle"></div>
								</div>
							</label>
						</div>
						<div ng-show="settings_data.terminal.type!='KITCHEN'">
							<div class="item item-toggle" >
								Enable Online Orders
								<label class="toggle">
									<input ng-model="settings_data.online_order.enable" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >
								Enable Call Order Sound
								<label class="toggle">
									<input ng-model="settings_data.call_order.sound" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >
								JustEat Orders
								<label class="toggle">
									<input ng-model="settings_data.justEat.orders" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div ng-if="aiv_info.enable_table!='TRUE'" class="item item-toggle" >
								Enable Sit-In
								<label class="toggle">
									<input ng-model="settings_data.pos_settings.enable_sitin" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >
								Enable Default Online Accept
								<label class="toggle">
									<input ng-model="settings_data.pos_settings.online_default_accept" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
						</div>
						<div class="item item-input-inset">
							<div class="input-label">Set Local Server IP</div>
							<label class="item-input-wrapper">
								<input ng-model="settings_data.localdb_ip" type="text" placeholder="192.168.1.12" ng-virtual-keyboard="kb_config">
							</label>
							<button class="button button-positive " title="Save IP" ng-click="setLocalIp('PRIMARY');"><i class="icon ion-checkmark"></i></button>
						</div>
						<div ng-show="aiv_info.enable_kitchen=='TRUE'" class="item item-input-inset">
							<div class="input-label">Set Local IP</div>
							<label class="item-input-wrapper">
								<input ng-model="settings_data.local_ip" type="text" placeholder="192.168.1.12" ng-virtual-keyboard="kb_config">
							</label>
							<button class="button button-positive " title="Save IP" ng-click="setLocalIp('SECONDARY');"><i class="icon ion-checkmark"></i></button>
						</div>
						<div ng-show="aiv_info.enable_kitchen=='TRUE'">
							<label class="item item-divider">Attach departments to kitchen</label>
							    <ion-list>
									<div ng-repeat="terminal in kitchenTerminals | filter:{type:'KITCHEN'}">
										<ion-item class="item-stable" ng-click="toggleOrderDetails(terminal)" ng-class="{active: isDetailsShown(terminal)}">
											<i class="icon" ng-class="isDetailsShown(terminal) ? 'ion-minus' : 'ion-plus'"></i>
											{{terminal.name}}
										</ion-item>
										<ion-checkbox class="item-accordion" ng-show="isDetailsShown(terminal)" 
											ng-repeat="dept in product_depts" ng-checked="terminal.dept.indexOf(dept) > -1" ng-click="toggleDept(dept,terminal)">{{dept}}</ion-checkbox>
									{{item}}
								  </ion-item>
								</div>
							</ion-list>
						</div>
					</div>
					<div ng-show="aiv_settings.selected==='PRINTER'" class="callerid">
						<!--<div class="item item-divider" ng-click="print_settings_clicked=!print_settings_clicked"><i class="icon" ng-class="print_settings_clicked ? 'ion-chevron-down' : 'ion-chevron-right'"></i> Takeaway Printer Settings</div>
						<div ng-show="print_settings_clicked">
							<div class="item item-input-inset">
								<div class="input-label">Select Printer</div>
								<label class="item-select aiv-select">
									<select ng-model="settings_data.main_printer.name" ng-init="settings_data.main_printer.name" ng-options="printer for printer in aiv_printers"></select>
								</label>
							</div>
							<div class="item item-input-inset">
								<div class="input-label">Select Printer type</div>
								<label class="item-select aiv-select">
									<select ng-model="settings_data.main_printer.type" ng-init="settings_data.main_printer.type" ng-options="type for type in aiv_printer_types"></select>
								</label>
							</div>
							<div ng-show="settings_data.main_printer.type=='Pixel Print'" class="item item-input-inset">
								<div class="input-label">Select Paper Size</div>
								<label class="item-select aiv-select">
									<select ng-model="settings_data.main_printer.paper" ng-init="settings_data.main_printer.paper" ng-options="paper.type as paper.type for paper in aiv_paper_sizes"></select>
								</label>
							</div>
							<div class="row print-commands" ng-show="settings_data.main_printer.type=='Receipt Print'">
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">Set line length</span>
										<label class="item-input-wrapper">
											<input ng-model="settings_data.main_printer.lineLength" type="number" placeholder="Even numbers only" ng-virtual-keyboard="kb_config">						
										</label>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<ion-checkbox ng-model="settings_data.main_printer.enable_cut">Cut command</ion-checkbox>
										<label class="item-input-wrapper">
											<input ng-disabled="!settings_data.main_printer.enable_cut" ng-class="{'aiv-disabled':!settings_data.main_printer.enable_cut}" ng-model="settings_data.main_printer.cmd_cut" type="text" placeholder="Cut paper" ng-virtual-keyboard="kb_config">						
										</label>
									</div>
								</div>
							</div>
							<div class="row print-commands" ng-show="settings_data.main_printer.type=='Receipt Print'">
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">DON</span>
										<label class="item-input-wrapper">
											<input ng-model="settings_data.main_printer.cmd_don" type="text" placeholder="Double font On" ng-virtual-keyboard="kb_config">
										</label>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">DOFF</span>
										<label class="item-input-wrapper">
											<input ng-model="settings_data.main_printer.cmd_doff" type="text" placeholder="Double font Off" ng-virtual-keyboard="kb_config">
										</label>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">BON</span>
										<label class="item-input-wrapper">
											<input ng-model="settings_data.main_printer.cmd_bon" type="text" placeholder="Bold On" ng-virtual-keyboard="kb_config">
										</label>
									</div>
								</div>
								<div class="col">
									<div class="item item-input-inset">
										<span class="input-label">BOFF</span>
										<label class="item-input-wrapper">
											<input ng-model="settings_data.main_printer.cmd_boff" type="text" placeholder="Bold Off" ng-virtual-keyboard="kb_config">
										</label>
									</div>
								</div>
							</div>
						</div>-->
						<!--<ion-checkbox ng-model="settings_data.label_printer.selected">Enable Label Printing(For printing product name)</ion-checkbox>
						<div class="list" ng-show="settings_data.label_printer.selected">
							<div class="item item-input-inset">
								<div class="input-label">Select Printer</div>
								<label class="item-select aiv-select">
									<select ng-model="settings_data.label_printer.name" ng-init="settings_data.label_printer.name" ng-options="printer for printer in aiv_printers"></select>
								</label>
							</div>
						</div>-->
						<!--<div class="item item-divider" ng-click="kot_settings_clicked=!kot_settings_clicked"><i class="icon" ng-class="kot_settings_clicked ? 'ion-chevron-down' : 'ion-chevron-right'"></i> Takeaway KOT Settings</div>
						<div ng-show="kot_settings_clicked">
							<div class="item item-toggle" >Enable/Disable KOT
								<label class="toggle">
									<input ng-model="print_config.kot" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div ng-show="print_config.kot">
								<ion-checkbox ng-model="settings_data.kot_printer1.selected">Set KOT Printer 1(Defaults to Main printer)</ion-checkbox>
								<div class="list" ng-show="settings_data.kot_printer1.selected">
									<div class="item item-input-inset">
										<div class="input-label">Select Printer</div>
										<label class="item-select aiv-select">
											<select ng-model="settings_data.kot_printer1.name" ng-init="settings_data.kot_printer1.name" ng-options="printer for printer in aiv_printers"></select>
										</label>
									</div>
									<div class="row print-commands" ng-show="settings_data.kot_printer1.type=='Receipt Print'">
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">Set line length</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer1.lineLength" type="number" placeholder="Even numbers only" ng-virtual-keyboard="kb_config">						
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<ion-checkbox ng-model="settings_data.kot_printer1.enable_cut">Cut command</ion-checkbox>
												<label class="item-input-wrapper">
													<input ng-disabled="!settings_data.kot_printer1.enable_cut" ng-class="{'aiv-disabled':!settings_data.kot_printer1.enable_cut}" ng-model="settings_data.kot_printer1.cmd_cut" type="text" placeholder="Cut paper" ng-virtual-keyboard="kb_config">						
												</label>
											</div>
										</div>
									</div>
									<div class="row print-commands" ng-show="settings_data.kot_printer1.type=='Receipt Print'">
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">DON</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer1.cmd_don" type="text" placeholder="Double font On" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">DOFF</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer1.cmd_doff" type="text" placeholder="Double font Off" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">BON</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer1.cmd_bon" type="text" placeholder="Bold On" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">BOFF</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer1.cmd_boff" type="text" placeholder="Bold Off" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
									</div>
								</div>
								<ion-checkbox ng-model="settings_data.kot_printer2.selected">Set KOT Printer 2(Defaults to Main printer)</ion-checkbox>
								<div class="list" ng-show="settings_data.kot_printer2.selected">
									<div class="item item-input-inset">
										<div class="input-label">Select Printer</div>
										<label class="item-select aiv-select">
											<select ng-model="settings_data.kot_printer2.name" ng-init="settings_data.kot_printer2.name" ng-options="printer for printer in aiv_printers"></select>
										</label>
									</div>
									<div class="row print-commands" ng-show="settings_data.kot_printer2.type=='Receipt Print'">
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">Set line length</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer2.lineLength" type="number" placeholder="Even numbers only" ng-virtual-keyboard="kb_config">						
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<ion-checkbox ng-model="settings_data.kot_printer2.enable_cut">Cut command</ion-checkbox>
												<label class="item-input-wrapper">
													<input ng-disabled="!settings_data.kot_printer2.enable_cut" ng-class="{'aiv-disabled':!settings_data.kot_printer2.enable_cut}" ng-model="settings_data.kot_printer2.cmd_cut" type="text" placeholder="Cut paper" ng-virtual-keyboard="kb_config">						
												</label>
											</div>
										</div>
									</div>
									<div class="row print-commands" ng-show="settings_data.kot_printer2.type=='Receipt Print'">
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">DON</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer2.cmd_don" type="text" placeholder="Double font On" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">DOFF</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer2.cmd_doff" type="text" placeholder="Double font Off" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">BON</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer2.cmd_bon" type="text" placeholder="Bold On" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
										<div class="col">
											<div class="item item-input-inset">
												<span class="input-label">BOFF</span>
												<label class="item-input-wrapper">
													<input ng-model="settings_data.kot_printer2.cmd_boff" type="text" placeholder="Bold Off" ng-virtual-keyboard="kb_config">
												</label>
											</div>
										</div>
									</div>
								</div>
								<div class="item item-input-inset">
									<div class="input-label">KOT receipts</div>
									<label class="item-input-wrapper">
										<input ng-model="receiptCount.kot" type="text" placeholder="No. of KOT receipts" ng-virtual-keyboard="kb_config">
									</label>
								</div>
							</div>
						</div>-->
						<div class="item item-divider" ng-click="tb_print_settings_clicked=!tb_print_settings_clicked;add_printer_clicked=false"><i class="icon" ng-class="tb_print_settings_clicked ? 'ion-chevron-down' : 'ion-chevron-right'"></i> Printer Settings</div>
						<div ng-show="tb_print_settings_clicked&&aiv_info.enable_table=='TRUE'">
							<div ng-show="!add_printer_clicked" class="item">
								<button class="button button-positive button-block" ng-click="add_printer_clicked=!add_printer_clicked">Add Printer</button>
							</div>
							<div class="card" ng-show="add_printer_clicked">
								<div class="item item-input-inset">
									<div class="input-label">Select Printer</div>
									<label class="item-select aiv-select">
										<select ng-model="settings_data.printer.name" ng-init="settings_data.printer.name" ng-options="printer for printer in aiv_printers"></select>
									</label>
								</div>
								<div class="item item-input-inset">
									<div class="input-label">Set as </div>
									<label class="item-select aiv-select">
										<select ng-model="settings_data.printer.usage">
											<option>Main</option>
											<option>KOT</option>
										</select>
									</label>
								</div>
								<div ng-show="settings_data.printer.usage=='KOT'" class="item item-input-inset">
									<div class="input-label">Select Department</div>
									<label class="item-select aiv-select">
										<select ng-model="settings_data.printer.dept" ng-options="dept for dept in product_depts">
											<option value="">None</option>
										</select>
									</label>
								</div>
								<div class="row item print-commands">
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">Set line length</span>
											<label class="item-input-wrapper">
												<input ng-model="settings_data.printer.lineLength" type="number" placeholder="Even numbers only" ng-virtual-keyboard="kb_config">						
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<ion-checkbox ng-model="settings_data.printer.enable_cut">Cut command</ion-checkbox>
											<label class="item-input-wrapper">
												<input ng-disabled="!settings_data.printer.enable_cut" ng-class="{'aiv-disabled':!settings_data.printer.enable_cut}" ng-model="settings_data.printer.cmd_cut" type="text" placeholder="Cut paper" ng-virtual-keyboard="kb_config">						
											</label>
										</div>
									</div>
								</div>
								<div class="row item print-commands">
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">DON</span>
											<label class="item-input-wrapper">
												<input ng-model="settings_data.printer.cmd_don" type="text" placeholder="Double font On" ng-virtual-keyboard="kb_config">
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">DOFF</span>
											<label class="item-input-wrapper">
												<input ng-model="settings_data.printer.cmd_doff" type="text" placeholder="Double font Off" ng-virtual-keyboard="kb_config">
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">BON</span>
											<label class="item-input-wrapper">
												<input ng-model="settings_data.printer.cmd_bon" type="text" placeholder="Bold On" ng-virtual-keyboard="kb_config">
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">BOFF</span>
											<label class="item-input-wrapper">
												<input ng-model="settings_data.printer.cmd_boff" type="text" placeholder="Bold Off" ng-virtual-keyboard="kb_config">
											</label>
										</div>
									</div>
								</div>
								<div class="button-bar">
									<button class="button button-balanced button-block" style="margin:0px;" ng-click="add_printer_clicked=!add_printer_clicked;savePrinter(settings_data.printer,true)">Save</button>
									<button class="button button-assertive button-block" style="margin:0px;" ng-click="add_printer_clicked=!add_printer_clicked;resetPrinterFields(settings_data.printer);">Cancel</button>
								</div>
							</div>
							<ion-list class="list-inset" ng-if="settings_data.printers.length">
								<div ng-repeat="aiv_printer in settings_data.printers">
									<ion-item class="item item-icon-right" ng-click="aiv_printer.edit=!aiv_printer.edit">
									<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removePrinter(aiv_printer)"></i>
									{{aiv_printer.name}} <span ng-if="aiv_printer.usage=='KOT'">({{aiv_printer.dept}})</span>
									</ion-item>
									<div ng-show="aiv_printer.edit" class="card">
										<div class="item item-input-inset">
											<div class="input-label">Select Printer</div>
											<label class="item-select aiv-select">
												<select ng-model="aiv_printer.name" ng-init="aiv_printer.name" ng-options="printer for printer in aiv_printers"></select>
											</label>
										</div>
										<div class="item item-input-inset">
											<div class="input-label">Set as </div>
											<label class="item-select aiv-select">
												<select ng-model="aiv_printer.usage">
													<option>Main</option>
													<option>KOT</option>
												</select>
											</label>
										</div>
										<div ng-show="aiv_printer.usage=='KOT'" class="item item-input-inset">
											<div class="input-label">Select Department</div>
											<label class="item-select aiv-select">
												<select ng-model="aiv_printer.dept" ng-options="dept for dept in product_depts">
													<option value="">None</option>
												</select>
											</label>
										</div>
										<div class="row item print-commands">
											<div class="col">
												<div class="item item-input-inset">
													<span class="input-label">Set line length</span>
													<label class="item-input-wrapper">
														<input ng-model="aiv_printer.lineLength" type="number" placeholder="Even numbers only" ng-virtual-keyboard="kb_config">						
													</label>
												</div>
											</div>
											<div class="col">
												<div class="item item-input-inset">
													<ion-checkbox ng-model="aiv_printer.enable_cut">Cut command</ion-checkbox>
													<label class="item-input-wrapper">
														<input ng-disabled="!aiv_printer.enable_cut" ng-class="{'aiv-disabled':!aiv_printer.enable_cut}" ng-model="aiv_printer.cmd_cut" type="text" placeholder="Cut paper" ng-virtual-keyboard="kb_config">						
													</label>
												</div>
											</div>
										</div>
										<div class="row item print-commands">
											<div class="col">
												<div class="item item-input-inset">
													<span class="input-label">DON</span>
													<label class="item-input-wrapper">
														<input ng-model="aiv_printer.cmd_don" type="text" placeholder="Double font On" ng-virtual-keyboard="kb_config">
													</label>
												</div>
											</div>
											<div class="col">
												<div class="item item-input-inset">
													<span class="input-label">DOFF</span>
													<label class="item-input-wrapper">
														<input ng-model="aiv_printer.cmd_doff" type="text" placeholder="Double font Off" ng-virtual-keyboard="kb_config">
													</label>
												</div>
											</div>
											<div class="col">
												<div class="item item-input-inset">
													<span class="input-label">BON</span>
													<label class="item-input-wrapper">
														<input ng-model="aiv_printer.cmd_bon" type="text" placeholder="Bold On" ng-virtual-keyboard="kb_config">
													</label>
												</div>
											</div>
											<div class="col">
												<div class="item item-input-inset">
													<span class="input-label">BOFF</span>
													<label class="item-input-wrapper">
														<input ng-model="aiv_printer.cmd_boff" type="text" placeholder="Bold Off" ng-virtual-keyboard="kb_config">
													</label>
												</div>
											</div>
										</div>
										<div class="button-bar">
											<button class="button button-balanced button-block" style="margin:0px;" ng-click="aiv_printer.edit=!aiv_printer.edit;savePrinter(aiv_printer,false)">Save</button>
											<button class="button button-assertive button-block" style="margin:0px;" ng-click="aiv_printer.edit=!aiv_printer.edit;resetPrinterFields(aiv_printer);">Cancel</button>
										</div>
									</div>
								</div>
							</ion-list>
						</div>
						<div class="item item-divider" ng-click="cdr_settings_clicked=!cdr_settings_clicked"><i class="icon" ng-class="cdr_settings_clicked ? 'ion-chevron-down' : 'ion-chevron-right'"></i> CashDrawer Settings</div>
						<div ng-show="cdr_settings_clicked">
							<div class="item item-toggle" >Enable/Disable CashDrawer
								<label class="toggle">
									<input ng-model="print_config.cashdrawer" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div ng-show="print_config.cashdrawer">
								<div class="item item-input-inset">
									<div class="input-label">CashDrawer command</div>
									<label class="item-input-wrapper">
										<input ng-model="settings_data.printer.cmd_cashdrawer" type="text" placeholder="Cash drawer command" ng-virtual-keyboard="kb_config">
									</label>
								</div>
							</div>
						</div>
						<div class="item item-divider" ng-click="copy_settings_clicked=!copy_settings_clicked"><i class="icon" ng-class="copy_settings_clicked ? 'ion-chevron-down' : 'ion-chevron-right'"></i> Print Copies</div>
						<div ng-show="copy_settings_clicked">
							<div class="item item-input-inset">
								<div class="input-label">Collection receipts</div>
								<label class="item-input-wrapper">
									<input ng-model="receiptCount.collection" type="text" placeholder="No. of receipts for Collection" ng-virtual-keyboard="kb_config">
								</label>
							</div>
							<div class="item item-input-inset">
								<div class="input-label">Delivery receipts</div>
								<label class="item-input-wrapper">
									<input ng-model="receiptCount.delivery" type="text" placeholder="No. of receipts for Delivery" ng-virtual-keyboard="kb_config">
								</label>
							</div>
							<div class="item item-input-inset">
								<div class="input-label">Takeaway receipts</div>
								<label class="item-input-wrapper">
									<input ng-model="receiptCount.inshop" type="text" placeholder="No. of receipts for Takeaway orders" ng-virtual-keyboard="kb_config">
								</label>
							</div>
							<div class="item item-input-inset" ng-repeat="deptObj in settings_data.dept_receiptCount">
								<div class="input-label">{{deptObj.dept}} KOT</div>
								<label class="item-input-wrapper">
									<input ng-model="deptObj.copies" type="number" placeholder="No. of receipts for {{deptObj.dept}} KOT" ng-virtual-keyboard="kb_config">
								</label>
							</div>
							<div class="item item-input-inset">
								<div class="input-label">Extra copies for Card payment</div>
								<label class="item-input-wrapper">
									<input ng-model="receiptCount.card" type="text" placeholder="Extra copies for Card" ng-virtual-keyboard="kb_config">
								</label>
							</div>
						</div>
						<div class="item item-toggle" >Enable/Disable KOT
							<label class="toggle">
								<input ng-model="print_config.kot" type="checkbox">
								<div class="track">
									<div class="handle"></div>
								</div>
							</label>
						</div>
						<!--<div class="item item-toggle" >Print KOT as Receipt
							<label class="toggle">
							<input ng-model="settings_data.common_printer_settings.kot_receipt" type="checkbox">
							<div class="track">
								<div class="handle"></div>
							</div>
							</label>
						</div>-->
						<div class="item item-divider"> Daily Order Number</div>
						<div class="item item-toggle" >Common order number for all terminals
							<label class="toggle">
							<input ng-model="dailyOrderNo.common" type="checkbox">
							<div class="track">
								<div class="handle"></div>
							</div>
							</label>
						</div>
						<div class="row print-commands">
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Start</span>
									<label class="item-input-wrapper">
										<input ng-model="dailyOrderNo.start" type="text" placeholder="Starts from" ng-virtual-keyboard="kb_config">						
									</label>
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Prefix</span>
									<label class="item-input-wrapper">
										<input ng-model="dailyOrderNo.prefix" type="text" placeholder="Prefixed with" ng-virtual-keyboard="kb_config">						
									</label>
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Seq No.</span>
									<label class="item-input-wrapper">
										<input ng-model="dailyOrderNo.num" type="text" placeholder="Present Order No." ng-virtual-keyboard="kb_config">						
									</label>
								</div>
							</div>
						</div>
					</div>
					<div ng-show="aiv_settings.selected==='CALLERID'" class="callerid">
						<div class="item item-input-inset">
							<div class="input-label">Select Port</div>
							<label class="item-select aiv-select">
								<select ng-model="settings_data.callerid.port" ng-init="settings_data.callerid.port" ng-options="port for port in com_ports"></select>
							</label>
						</div>
						<button ng-hide="settings_data.callerid.connected" class="button button-full button-balanced" style="min-height: 41px;" ng-click="openSerialPort(settings_data.callerid,false);"><i class="icon ion-android-done"></i> Connect</button>
						<button ng-show="settings_data.callerid.connected" class="button button-full button-assertive" style="min-height: 41px;" ng-click="closeSerialPort(settings_data.callerid);"><i class="icon ion-android-close"></i> Disconnect</button>
					</div>
					<div ng-show="aiv_settings.selected==='KEYBOARD'">
						<div class="item item-toggle" >Switch Virtual Keyboard
							<label class="toggle">
							<input ng-model="virtual_key_enable" ng-change="changeKeyboard(virtual_key_enable);" type="checkbox">
							<div class="track">
								<div class="handle"></div>
							</div>
							</label>
						</div>
					</div>
					<div ng-show="aiv_settings.selected==='LOYALTY'">
						<div class="card list">
							<div class="item item-toggle" >Enable/Disable Loyalty
								<label class="toggle">
								<input ng-model="hf_loyalty.enabled" type="checkbox">
								<div class="track">
									<div class="handle"></div>
								</div>
								</label>
							</div>
							<div ng-show="hf_loyalty.enabled">
								<label class="item item-divider">Sales conversion rate</label>
								<div class="row">
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">Amount</span>
											<label class="item-input-wrapper">
												£ <input ng-focus="setKeyInput('LOYALTY_SALE_AMT',hf_loyalty.sales.amount)" ng-model="hf_loyalty.sales.amount" type="text"  value="{{hf_loyalty.sales.amount | currency:'':2}}">
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<label class="item-input-wrapper">
												<input ng-focus="setKeyInput('LOYALTY_SALE_PTS',hf_loyalty.sales.points)" ng-model="hf_loyalty.sales.points" type="text"  value="{{hf_loyalty.sales.points | currency:'':2}}">
											</label>
											<span class="input-label" style="padding-left:5px;">Points</span>
										</div>
									</div>
								</div>
								<label class="item item-divider">Rewards conversion rate</label>
								<div class="row">
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">Amount</span>
											<label class="item-input-wrapper">
												£ <input ng-focus="setKeyInput('LOYALTY_REWARD_AMT',hf_loyalty.rewards.amount)" ng-model="hf_loyalty.rewards.amount" type="text"  value="{{hf_loyalty.rewards.amount | currency:'':2}}">
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<label class="item-input-wrapper">
												<input ng-focus="setKeyInput('LOYALTY_REWARD_PTS',hf_loyalty.rewards.points)" ng-model="hf_loyalty.rewards.points" type="text"  value="{{hf_loyalty.rewards.points | currency:'':2}}">
											</label>
											<span class="input-label" style="padding-left:5px;">Points</span>
										</div>
									</div>
								</div>
								<label class="item item-divider">Extra points</label>
								<div class="row">
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">Signup Points</span>
											<label class="item-input-wrapper">
												<input ng-focus="setKeyInput('LOYALTY_SIGNUP_POINTS',hf_loyalty.signup_points)" ng-model="hf_loyalty.signup_points" type="text"  value="{{hf_loyalty.signup_points}}">
											</label>
										</div>
									</div>
									<div class="col">
										<div class="item item-input-inset">
											<span class="input-label">Feedback Points</span>
											<label class="item-input-wrapper">
												<input ng-focus="setKeyInput('LOYALTY_FEEDABCK_POINTS',hf_loyalty.feedback_points)" ng-model="hf_loyalty.feedback_points" type="text"  value="{{hf_loyalty.feedback_points}}">
											</label>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row" ng-show="hf_loyalty.enabled">
							<div class="col-50 col-offset-25">
								<ng-keypad on-key-pressed='onKeyPressed' class=" bold-text large-text tile-appear">
									<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
								</ng-keypad>
							</div>
						</div>
					</div>
					<div ng-show="aiv_settings.selected==='DRIVERS'">
						<div class="item item-input-inset">
							<label class="input-label">
								Driver's Name
							</label>
							<label class="item-input-wrapper">
								<input ng-model="driver_name" type="text" placeholder="Driver's name" ng-virtual-keyboard="kb_config">
							</label>
							<button class="button button-positive aiv-button-round" ng-click="createDriver(driver_name);"><i class="icon ion-plus"></i></button>
						</div>
						<ion-list>
							<ion-item class="item item-icon-left" ng-repeat="driver in delivery_drivers.drivers">
							<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeDriver(driver)"></i>
							{{driver.name}}
							</ion-item>
						</ion-list>
					</div>
					<div ng-show="aiv_settings.selected==='DISCOUNTS'">
						<label class="item item-divider">User discounts in percentage</label>
						<div class="item item-input-inset">
							<label class="input-label">
								Discount %
							</label>
							<label class="item-input-wrapper">
								<input ng-model="discount" type="number" placeholder="Discount %" ng-virtual-keyboard="kb_config">
							</label>
							<button class="button button-positive aiv-button-round" ng-click="createUserDiscount(discount);"><i class="icon ion-plus"></i></button>
						</div>
						<ion-list>
							<ion-item class="item item-icon-left" ng-repeat="discount in user_discounts | orderBy:discount">
							<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeUserDiscount(discount)"></i>
							{{discount}}%
							</ion-item>
						</ion-list>
					</div>
					<div ng-show="aiv_settings.selected==='TABLES'">
						<div class="row item print-commands" style="padding:0px;">
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Table No.</span>
									<label class="item-input-wrapper">
										<input ng-model="aiv_table.number" type="text" placeholder="Table No." ng-virtual-keyboard="kb_config">
									</label>
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset">
									<span class="input-label">Seats</span>
									<label class="item-input-wrapper">
										<input ng-model="aiv_table.seats" type="text" placeholder="Seats" ng-virtual-keyboard="kb_config">
									</label>
								</div>
							</div>
							<div class="col">
								<div class="item item-input-inset" style="padding:7px;">
									<span class="input-label">Shape</span>
									<label class="item-select aiv-select">
										<select ng-model="aiv_table.shape" ng-init="aiv_table.shape=table_shape[0]" ng-options="shape for shape in table_shape" ></select>
									</label>
								</div>
							</div>
						</div>
						<div class="button-bar">
							<button class="button  button-innovative" ng-click="table_remove=false;tableLayout('LAYOUT');">
							Select Table Location
							</button>
							<button class="button  button-calm" ng-click="table_remove=false;tableLayout('LAYOUT1');">
							View Table Layout
							</button>
							<button class="button  button-assertive" ng-click="table_remove=true;tableLayout('LAYOUT');">
							Remove Tables
							</button>
						</div>
						<div class="card table-layout-view" ng-if="table_view =='LAYOUT1'">
							<div class="row" ng-repeat="i in ::row_col_2 " ng-init="rowIndex = $index">
								<div class="col col-10" ng-repeat="j in ::i" ng-init="columnIndex = $index" >
								   <div class="item text-center" ng-repeat="table in ::aiv_tables track by $index" ng-class="{table_shape:table.shape ==='circle'}" ng-if="table.table_loc.row ==rowIndex && table.table_loc.col ==columnIndex">
										<label class="item-text-wrap h5 table_text_color" >{{table.number}}</label>
									</div>
								</div>
							</div>
						</div>
						<div ng-if="table_view =='LAYOUT'">
							<div class="row table-layout" ng-repeat="i in ::row_col_2 " ng-init="rowIndex = $index">
								<div class="col col-10" ng-repeat="j in ::i" ng-init="columnIndex = $index" >
									<div style="height:100%" ng-class="{row_ROW_COL: j.selected == true}"  ng-click="!table_remove?rowColColor(rowIndex,columnIndex):'';" >
										<div class="item text-center" ng-repeat="table in ::aiv_tables track by $index" ng-if="table.table_loc.row ==rowIndex && table.table_loc.col ==columnIndex">
											<label class="item-text-wrap h5 table_text_color" >{{table.number}}</label>
											<i ng-show="table_remove" class="icon ion-close-circled assertive aiv-button-icon table-remove-button" ng-click="deleteTable(table);$event.stopPropagation();"></i>
										</div>
									</div>
								</div>
							</div> 
						</div>
						<button class="button button-full button-positive" style="min-height: 41px;" ng-click="createTable(aiv_table);"><i class="icon ion-plus"></i> Add Table</button>
					</div>
					<div ng-show="aiv_settings.selected==='PRDT_DEPT'">
						<div class="item item-input-inset">
							<label class="input-label">
								Department Name
							</label>
							<label class="item-input-wrapper">
								<input ng-model="dept_name" type="text" placeholder="Department name" ng-virtual-keyboard="kb_config">
							</label>
							<button class="button button-positive aiv-button-round" ng-click="createDept(dept_name);"><i class="icon ion-plus"></i></button>
						</div>
						<ion-list>
							<ion-item class="item item-icon-left" ng-repeat="dept in product_depts">
							<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeDept(dept)"></i>
							{{dept}}
							</ion-item>
						</ion-list>
					</div>
					<div ng-show="aiv_settings.selected==='PRDT_GROUP'">
						<div class="item item-input-inset">
							<label class="input-label">
								Group Name
							</label>
							<label class="item-input-wrapper">
								<input ng-model="group_name" type="text" placeholder="Group name" ng-virtual-keyboard="kb_config">
							</label>
							<button class="button button-positive aiv-button-round" ng-click="createGroup(group_name);"><i class="icon ion-plus"></i></button>
						</div>
						<ion-list>
							<ion-item class="item item-icon-left" ng-repeat="group in product_groups">
							<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeGroup(group)"></i>
							{{group}}
							</ion-item>
						</ion-list>
					</div>
					<div ng-show="aiv_settings.selected==='SMS'">
						<div class="item item-input-inset ">
							<label class="item-input-wrapper">
								<textarea style="width:100%;background-color:#eee;" ng-model="template_name" rows="4" placeholder="Add new message template" ng-virtual-keyboard="kb_config"></textarea>
							</label>
							<button style="border-radius: 50%;min-height: 52px;" class="button button-positive" ng-click="createSMSTemplate(template_name);"><i class="icon ion-plus"></i></button>
						</div>
						<ion-list>
							<ion-item class="item item-icon-left item-text-wrap" ng-repeat="template in SMSTemplates track by $index">
							<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeSMSTemplate(template)"></i>
							{{template}}
							</ion-item>
						</ion-list>
					</div>
					<div ng-show="aiv_settings.selected==='PAY_METHODS'">
						<label class="item item-divider">Enable/Disable payment methods (Cash method cannot be disabled)</label>
						<div class="item item-toggle" ng-repeat="method in settings_data.payment_methods">
							<span class="positive" style="margin-right:10px;"><strong>{{method.title}}</strong></span>{{method.description}}
							<label class="toggle">
								<input ng-disabled="method.id=='cod'" ng-model="method.enable" type="checkbox">
								<div class="track">
									<div class="handle"></div>
								</div>
							</label>
						</div>
					</div>
					<div ng-show="aiv_settings.selected==='DEFAULTS'">
						<div ng-if="terminalData.type!='KITCHEN'">
							<div class="item item-toggle" >Turn ON Takeaway print enable button by default
								<label class="toggle">
									<input ng-model="settings_data.default_btns.default_print_enable_btn" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
						</div>
					</div>
					<div ng-show="aiv_settings.selected==='OTHER_SETTINGS'">
						<div ng-if="terminalData.type!='KITCHEN'">
							<!--<ion-checkbox ng-if="terminalData.type!='KITCHEN'" ng-model="z_amount.enable" class="item-checkbox-right">Reports</ion-checkbox>-->
							<div class="item item-toggle" >
								Show Product instructions
								<label class="toggle">
									<input ng-model="settings_data.other_settings.show_product_instructions" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >Show login screen after action
								<label class="toggle">
									<input ng-model="enableLoginScreen.show" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >
								Show Delivery Charges in Reports
								<label class="toggle">
									<input ng-model="settings_data.pos_settings.show_delcharge_report" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >Show sub-options for products in Takeaway
								<label class="toggle">
									<input ng-model="settings_data.default_btns.show_takeaway_options" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item item-toggle" >Clear order history from Cloud on Z report
								<label class="toggle">
									<input ng-model="settings_data.default_btns.clear_cloud_orders" type="checkbox">
									<div class="track">
										<div class="handle"></div>
									</div>
								</label>
							</div>
							<div class="item">
								<label class="button button-clear button-dark">Early Takeaway starts from </label>
								<button class="button button-positive button-outline icon-left ion-clock" ng-click="openTimePicker('ET_FROM',settings_data.pos_settings.early_takeaway.start)">{{ settings_data.pos_settings.early_takeaway.start | date:'hh:mm a' }}</button>
								<label class="button button-clear button-dark">and ends at </label>
								<button class="button button-positive button-outline icon-left ion-clock" ng-click="openTimePicker('ET_TO',settings_data.pos_settings.early_takeaway.end)">{{ settings_data.pos_settings.early_takeaway.end | date:'hh:mm a' }}</button>
							</div>
						</div>
						<button ng-if="terminalData.type=='KITCHEN'" class="button button-full button-assertive" style="min-height: 41px;" ng-click="clearKitchenDB();"><i class="icon ion-trash-b"></i> Clear Database</button>
						<div ng-if="aiv_info.enable_table=='TRUE'" class="card">
							<div class="item item-divider" >Scan QR code OR use below info to setup <span class="positive">Take Order</span> Mobile App</div>
							<div class="row" style="padding: 20px;" >
								<div class="col col-center">
									<div class="text-center">
										<qr type-number="8" correction-level="'M'" size="200" input-mode="'8bit'" text="string" image="true"></qr>
									</div>
								</div>
								<div class="col col-center list popup-item-custom custom-item">
										<div class="row item item-text-wrap">
											<div class="col col-center col-50">Server Ip </div>
											<div class="col col-center col-50"><span>{{localdb_ip}}</span></div>
										</div>
										<div class="row item item-text-wrap">
											<div class="col col-center col-50">User Name </div>
											<div class="col col-center col-50"><span>{{user_qr}}</span></div>
										</div>
										<div class="row item item-text-wrap">
											<div class="col col-center col-50">Password </div>
											<div class="col col-center col-50"><span>{{password_qr}}</span></div>
										</div>
										<div class="row item item-text-wrap">
											<div class="col col-center col-50">Database Name </div>
											<div class="col col-center col-50"><span>{{db_name_qr}}</span></div>
										</div>
								</div>
							</div>
						</div>					
					</div>
					<div ng-show="aiv_settings.selected==='BIO_SETTINGS'">
						<ion-list>
						<ion-radio name="users_bio" class="bold-text tile-appear" style="font-size:16px;" ng-model="fid_users.selected" ng-click="fiduser(user);"  ng-value="user._id"  ng-repeat="user in ::aiv_users.users ">{{::user.user_displayname}}</ion-radio>
						</ion-list>
						<button ng-disabled="!fid_users.selected" class="button button-full button-positive" style="min-height: 41px;" ng-click="registerUser(fid_users);"><i class="icon ion-android-done"></i> Register</button>
					</div>
					<div ng-show="settings_error.pass" class="error balanced animated fadeInLeft h4 padding-left">
						<i class="ion-checkmark"></i> {{settings_error.pass}}
					</div>
				</div>
			</div>
			<div class="row" ng-show="menu_settings.active=='Reports'" style="margin-top:0px;">
				<div class="col col-33" style="border-right:1px solid #ddd;">
					<ion-list ng-show="aiv_reports.selected!=='STOCKUPDATE'">
						<ion-radio name="reports_type" ng-change="resetSettingsErr();" ng-model="aiv_reports.selected" ng-value="type.id" ng-repeat="type in ::aiv_reports.types">{{type.name}}</ion-radio>
					</ion-list>
					<ion-scroll direction="y" style="height:calc(100vh - 80px);" ng-show="aiv_reports.selected==='STOCKUPDATE' && showList ==false">
						<ion-item ng-repeat="item in globelPurchseList | limitTo: 3 track by $index ">
						<ion-item style="padding:10px;background-color: antiquewhite;">
						{{item.data.date | date:"MM/dd/yyyy"}}
						</ion-item>
							<div class="list">
							  <ion-item style="padding:10px;border: unset;" ng-repeat="data in item.data.purchase_list track by $index" >
								{{::data.item}}-{{::data.quantity}} {{::data.unit}}
							  </ion-item>
							</div>
						</ion-item>
					</ion-scroll>
					<ion-scroll direction="y" style="height:calc(100vh - 80px);" ng-show="aiv_reports.selected==='STOCKUPDATE' && showList ==true">
							<div class="list">
							  <ion-item style="padding:10px;background-color:aliceblue" ng-repeat="data in viewListSearch track by $index" >
								{{::data.item}}-{{::data.quantity}} {{::data.unit}} on {{::data.date | date:"MM/dd/yyyy"}}
							  </ion-item>
							</div>
					</ion-scroll>
				</div>
				
				<div class="col col-67">
					<div ng-show="settings_error.err" class="error assertive animated fadeInLeft h4 padding-left">
						<i class="ion-information-circled"></i> {{settings_error.err}}
					</div>
					 <div ng-show="aiv_reports.selected==='XREPORT'">
						<div class="card">
							<label class="item item-text-wrap item-divider">Fill the form and submit sales statistics to close the sales.</label>
						</div>
						
						
						
						<form name="salesheetForm" novalidate="">
							<div class="card row">
								<div class="col col-50">
									<label> <span class="input-label">Select Data</span></label>
								</div>
								<div class="col col-50">
									<label class="item item-input">
								  <button class="button button-positive button-clear icon-left ion-calendar" ng-click="openDatePicker('SALES',sales_from_date)">{{ sales_from_date | date:'yyyy-MM-dd' }}</button>
								</label>
								</div>
							</div>
							<div class="card row">
								<div class="col col-33 text-center">
									<label>Cash<input type="text" name="cash" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" ng-model="formSales.cash" ng-focus="setKeyInput('SALES_EDIT_CASH',formSales.cash)" placeholder="cash" required/></label>
								
								</div>
								<div class="col col-33 text-center">
									<label>Receipts<input type="text" name="receipt" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" ng-model="formSales.receipt" ng-focus="setKeyInput('SALES_EDIT_RECEIPT',formSales.receipt)" placeholder="receipts" required/></label>
							
								</div>
								<div class="col col-33 text-center">
									<label>Total<input nmae="total" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" type="text" ng-model="formSales.total"   ng-focus="setKeyInput('SALES_EDIT_TOTAL',formSales.total)"  placeholder="total" required/></label>
								
								</div>
							</div>
							<div class="card row">
								<div class="col col-50">
									<label>Cards</label>
									
								</div>
								<div class="col col-50">
									<input type="text" name="card" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" ng-model="formSales.card" ng-focus="setKeyInput('SALES_EDIT_CARD',formSales.card)"  placeholder="card" required/>
								
								</div>
							</div>
							<!--<div class="card row">
								<div class="col col-50">
									<label>SagePay</label>
								</div>
								<div class="col col-50">
									<input type="text" name="sagepay"  style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" ng-model="formSales.sagepay"  ng-focus="setKeyInput('SALES_EDIT_SAGEPAY',formSales.sagepay)"   placeholder="sagePay" required/>
								
								</div>
							</div>-->
							<button class="button button-full button-positive" style="min-height: 41px;" ng-click="getSalesReport(false)"><i class="icon ion-clipboard"></i>Submit</button>
							<div ng-if="formError"><label style="color: red; font-size: 1.4em;">Please fill all the fields in the form </label></div>
						</form>
						
						<div  ng-if="aiv_users.selected" class="row">
							<div class="col">
								<ng-keypad on-key-pressed='onKeyPressed' class=" bold-text tile-appear">
									<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
								</ng-keypad>						
							</div>
						</div>
					</div> 
					 <div ng-show="aiv_reports.selected==='STOCKUPDATE'">
						<!--<div class="card">
							<label class="item item-text-wrap item-divider">Fill the form and submit purchase list.</label>
						</div>-->
						<form name="purchaseListForm" novalidate="">
							<!--<div class="card row">
								<div class="col col-50">
									<label> <span class="input-label">Select Data</span></label>
								</div>
								<div class="col col-50">
									<label class="item item-input">
								  <button class="button button-positive button-clear icon-left ion-calendar" ng-click="openDatePicker('SALES',sales_from_date)">{{ sales_from_date | date:'yyyy-MM-dd' }}</button>
								</label>
								</div>
							</div>-->
									
							<div class="card row" style="margin-top: 0px;margin-bottom: 10px;">
								<div class="col col-33 text-center">
									<label>Item<input type="text" name="cash" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;"  ng-change="quickSearchItems(formPurchase.item)" ng-model="formPurchase.item" ng-focus="setKeyInput('PURCHASE_ITEM',formPurchase.item)" placeholder="item" required/></label>
								
								</div>
								<div class="col col-25 text-center">
									<label>Quantity<input type="text" name="receipt" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" ng-change="quickSearchItemsUnset();" ng-model="formPurchase.quantity" ng-focus="setKeyInput('PURCHASE_QTY',formPurchase.quantity)" placeholder="quantity" required/></label>
							
								</div>
								<div class="col col-25 text-center">
									<label>Unit<input name="total" style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" type="text" ng-model="formPurchase.unit"   ng-focus="setKeyInput('PURCHASE_UNIT',formPurchase.unit)"  placeholder="unit" required/></label>
								
								</div>
								<div class="col col-10 text-center">
									<button class="button button-positive aiv-button-round" ng-click="addToPurchaseList();"><i class="icon ion-plus"></i></button>
								</div>
							</div>
							<ion-scroll direction="y" style="height:calc(100vh - 570px);" ng-if="showList ==true">
								<div class="list">
								  <ion-item style="padding:10px;" ng-repeat="item in viewList track by $index | limitTo: 5" ng-click="actionPurchaseList(item)">
									{{::item}}
								  </ion-item>
								</div>
							</ion-scroll>
							<ion-scroll direction="y" style="height:calc(100vh - 570px);" lazy-scroll delegate-handle="productScroll" ng-if="showList ==false"> 
								<div class="row" ng-repeat ="details in purchaseListArray track by $index" style="padding: 0px;">
									<div class="col col-33 text-center">
										<label>{{details.item}}</label>
									
									</div>
									<div class="col col-25 text-center">
										<label>{{details.quantity}}</label>
								
									</div>
									<div class="col col-25 text-center">
										<label>{{details.unit}}</label>
									</div>
									<div class="col col-10 text-center">
										<i style="zoom: 1.7;" class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removePurchaseList($index)"></i>
									</div>
								</div>
							</ion-scroll>
							<!--<div class="card row">
								<div class="col col-50">
									<label>SagePay</label>
								</div>
								<div class="col col-50">
									<input type="text" name="sagepay"  style="border-radius: 10px;width: 100%;padding: 10px;background-color: #f7f0b2;" ng-model="formSales.sagepay"  ng-focus="setKeyInput('SALES_EDIT_SAGEPAY',formSales.sagepay)"   placeholder="sagePay" required/>
								
								</div>
							</div>-->
							<button class="button button-full button-positive" style="min-height: 41px;" ng-click="savePurchaseList()"><i class="icon ion-clipboard"></i>Submit</button>
							<div ng-if="formError"><label style="color: red; font-size: 1.4em;">Please fill all the fields in the form </label></div>
						</form>
						
						<div  ng-if="aiv_users.selected" class="row">
							<div class="col">
								<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
									<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
									<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
									<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
									<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
									<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>
								</ng-keypad>							
							</div>
						</div>
					</div> 
					<div ng-show="aiv_reports.selected==='ZREPORT'" ng-if="aiv_info.set_to_zero">
						<div class="card">
							<label class="item item-text-wrap item-divider">Clicking this button will delete all orders in the history of POS and set order number to start from zero</label>
						</div>
						<button ng-show="loginInfo.role=='shop_manager'" class="button button-full button-positive" style="min-height: 41px;" ng-click="getSalesReport(false)"><i class="icon ion-clipboard"></i>Clear all orders to ZERO</button>
						<button ng-show="loginInfo.role=='shop_manager'" class="button button-full button-assertive" style="min-height: 41px;" ng-click="getSalesReport(true)"><i class="icon ion-clipboard"></i>Blind Clear Orders-Do not use it..</button>
					</div>
					<div ng-show="aiv_reports.selected==='ZREPORT'&&loginInfo.role!='shop_manager'" class="error assertive animated fadeInLeft h4 padding-left">
						<i class="ion-information-circled"></i> You must be logged in as Manager for clearing sales 
					</div>
					<div ng-show="settings_error.pass" class="error balanced animated fadeInLeft h4 padding-left">
						<i class="ion-checkmark"></i> {{settings_error.pass}}
					</div>
				</div>
			</div>
        </ion-content>
		<!--<ion-footer-bar class="bar-light" style="height: 54px;">
		  <div class="button-bar">
			<a ng-show="loginInfo.role=='shop_manager'" class="button button-positive button-outline" ng-click="switch_menu('Settings')" ng-class="{'active': menu_settings.active=='Settings'}">Settings</a>
			<a class="button button-positive button-outline" ng-click="switch_menu('Reports')" ng-class="{'active': menu_settings.active=='Reports'}">Reports</a>
		  </div>
		</ion-footer-bar>-->
    </ion-modal-view>
</script>
<script id="online_order-modal.html" type="text/ng-template">
	<ion-modal-view style="height: 96vh;top:2%;" class="modal-responsive">
		<ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Online Order on {{online_order.data.created_at | date:'medium'}}</h1>
			<div class="buttons opt-buttons">
				<button class="button button-icon ion-close-circled" ng-click="closeModal('ONLINE_ORDER');"></button>
			</div>
        </ion-header-bar>
		<ion-content>
			<div class="row online-orders online-order-popup">
				<div class="col col-50" style="border-right:1px solid #ddd;">
					<label class="item item-positive text-center h2">{{online_order.data.shipping_lines[0].method_id=='local_delivery'?'Delivery':'Collection'}} in {{online_order.data.order_meta.duration}}</label>
					<div class="button-bar bar-light" ng-if="online_order.data.shipping_lines[0].method_id=='local_pickup'">
						<a class="button" style="border-color:#ddd;" ng-if="delivery_interval.collection.length" ng-click="online_order.data.order_meta.duration=interval" ng-class="{'button-balanced':online_order.data.order_meta.duration==interval}" ng-repeat="interval in delivery_interval.collection track by $index">{{interval | split:' ':0}}</a>
					</div>
					<div class="button-bar bar-light" ng-if="online_order.data.shipping_lines[0].method_id=='local_delivery'">
						<a class="button" style="border-color:#ddd;" ng-click="online_order.data.order_meta.duration=interval" ng-class="{'button-balanced':online_order.data.order_meta.duration==interval}" ng-repeat="interval in delivery_interval.delivery track by $index">{{interval | split:' ':0}}</a>
					</div>
					<label class="item item-divider text-center">{{online_order.data.payment_details.method_title}} - 
						<span ng-if="online_order.data.payment_details.paid">PAID</span>
						<span ng-if="!online_order.data.payment_details.paid">UNPAID</span>
					</label>
					<label class="item">
						<p>{{online_order.data.shipping_address.first_name}} {{online_order.data.shipping_address.last_name}}</p>
						<p>{{online_order.data.shipping_address.address_1}}</p>
						<p ng-if="online_order.data.shipping_address.address_2">{{online_order.data.shipping_address.address_2}}</p> 
						<p ng-if="online_order.data.shipping_address.city">{{online_order.data.shipping_address.city}}</p>
						<p>{{online_order.data.shipping_address.postcode}}</p>
						<p ng-if="online_order.data.shipping_address.state">{{online_order.data.shipping_address.state}}</p>
						<p>{{online_order.data.billing_address.phone}}</p>
						<p>{{online_order.data.billing_address.email}}</p>
						<p><strong>Pre-order count : {{online_order.data.customer.orders_count-1}}</strong></p>
					</label>
					<div class="card">
					  <label class="item item-input">
						<textarea ng-model="online_order.data.note" rows="8" placeholder="Notes" ng-virtual-keyboard="kb_config"></textarea>
					  </label>
					</div>
				</div>
				<div class="col col-50">
					<ion-list >
						<div class="item item-divider row">
							<div class="col col-50 col-center">Item</div>
							<div class="col col-center">Qty</div>
							<div class="col col-center " >Amt</div>
						</div>
						<ion-item class="row item item-text-wrap pos-cart" ng-repeat="product in ::online_order.data.line_items" track-by="$index">
							<div class="col col-50 col-center"><span>{{product.name}}</span>
								<p style="font-size:1em;" ng-repeat="attr in ::product.meta">{{attr.key | split:'###':0 | split:'_':0}} - {{attr.value | split:'###':0}}</p>
							</div>
							<div class="col col-center"><span>{{product.quantity}}</span></div>
							<div class="col col-center " ><span>{{product.subtotal | currency:"£":2}}</span></div>
						</ion-item>	
						<div class="row" ng-show="online_order.data.total_discount!=0 || online_order.data.total_shipping!=0">
							<div class="col col-center"><span>Sub Total</span></div>
							<div class="col col-center alignright"><span>{{online_order.data.subtotal | currency:"£":2}}</span></div>
						</div>
						<div class="row" ng-show="online_order.data.total_discount!=0">
							<div class="col col-center"><span>Discount</span></div>
							<div class="col col-center alignright"><span>{{online_order.data.total_discount | currency:"£":2}}</span></div>
						</div>
						<div class="row" ng-show="online_order.data.total_shipping!=0">
							<div class="col col-center"><span>Delivery</span></div>
							<div class="col col-center alignright"><span>{{online_order.data.total_shipping | currency:"£":2}}</span></div>
						</div>
						<div class="item item-divider row">
							<div class="col col-center"><span>Total</span></div>
							<div class="col col-center alignright"><span>{{online_order.data.total | currency:"£":2}}</span></div>
						</div>
					</ion-list>
				</div>
			</div>
		</ion-content>
		<ion-footer-bar class="bar-light" style="height: 54px;">
			<div class="button-bar">
				<button class="button button-balanced" ng-click="OWOAccept($event);"><i class="icon ion-checkmark"></i>Accept</button>
				<button class="button button-assertive" ng-click="OWOReject();"><i class="icon ion-close"></i>Reject</button>
			</div>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="keypad-popover.html" type="text/ng-template">
  <ion-popover-view class="aiv-keypad">
    <ion-content overflow-scroll=false>
		<div class="ios">
			<ng-keypad on-key-pressed='onKeyPressed'>
				<ng-key ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
				<!--<ng-key ng-key-type='keypad.type' ng-key-data="keypad.data">{{keypad.data}}</ng-key>-->
			</ng-keypad>
		</div>
    </ion-content>
  </ion-popover-view>
</script>
<script id="dropdown.html" type="text/ng-template">
  <ion-popover-view>
    <ion-content>
		<ion-list>
			<ion-item ng-repeat="item in dropdown_menu" ng-click="switch_menu(item)" >
				{{item}}
			</ion-item>
		<ion-list>
    </ion-content>
  </ion-popover-view>
</script>
<script id="kitchen-dropdown.html" type="text/ng-template">
  <ion-popover-view>
    <ion-content>
		<ion-list>
			<ion-item ng-repeat="item in alertArr track by $index" ng-click="showPriorityOrders(item)" >
				ORDER {{item}}
			</ion-item>
		<ion-list>
    </ion-content>
  </ion-popover-view>
</script>
<script id="call-popup.html" type="text/ng-template">
	<div ng-if="CIDCustomer.id" class="card" style="margin:5px;">
		<label class="item aiv-item">
			<p>{{CIDCustomer.billing_address.first_name}} {{CIDCustomer.billing_address.last_name}}</p>
			<p>{{CIDCustomer.billing_address.address_1}}</p>
			<p ng-show="CIDCustomer.billing_address.address_2">{{CIDCustomer.billing_address.address_2}}</p> 
			<p ng-show="CIDCustomer.billing_address.city">{{CIDCustomer.billing_address.city}}</p>
			<p>{{CIDCustomer.billing_address.postcode}}</p>
			<p ng-show="CIDCustomer.billing_address.phone">{{CIDCustomer.billing_address.phone}}</p>
			<p>Pre-order count : {{CIDCustomer.orders_count}}</p>
		</label>
	</div>
	<button ng-if="method.id" ng-repeat="method in shipping_methods" class="button button-positive button-full button-large padding" ng-click="CIDAccept(method)" >{{method.title}}</button>
	<button class="button button-royal button-full button-large padding" ng-click="CIDHold();">HOLD</button>
	<button class="button button-assertive button-full button-large padding" ng-click="CIDIgnore()">IGNORE</button>
</script>
<script id="db-popup.html" type="text/ng-template">
	<div class="list aivLabel">
		<label class="item item-icon-left">
			<i class="icon ion-at"></i>
			<input ng-focus="setKeyInput('INIT_IP',settings_data.localdb_ip)" type="text" ng-model="settings_data.localdb_ip">
		</label>
		<div style="text-align:center;padding:5px;color:#e70000;">{{settings_error.err}}</div>
	</div>
	<div class="row">
		<div class="col">
			<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
				<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>
			</ng-keypad>						
		</div>
	</div>
</script>
<script id="bagcharges-popup.html" type="text/ng-template">
	<button ng-repeat="charge in bagCharges.charges" class="button button-full button-large bold-text tile-appear" ng-click="updateBagCharge(charge,true)" ng-class="bagCharges.selected==charge?'button-positive':''" >{{bagCharges.currency+" "+charge}}</button>
</script>
<script id="order-slip-popup.html" type="text/ng-template">
	<ion-list class="popup-item-custom">
		<div class="row item">
			<div class="col col-center col-50">Total to Pay </div>
			<div class="col col-center col-50 text-right"><span>£{{::payment_select.to_pay | number:2}}</span></div>
		</div>
		<div class="row item">
			<div class="col col-center col-50">Tendered </div>
			<div class="col col-center col-50 text-right"><span>£{{::payment_select.amount | number:2}}</span></div>
		</div>
		<div class="row item">
			<div class="col col-center col-50">Balance </div>
			<div class="col col-center col-50 text-right"><span>£{{::payment_select.tender | number:2}}</span></div>
		</div>
	<ion-list>
</script>
<script id="password-popup.html" type="text/ng-template">
	<div class="list aivLabel">
		<label class="item item-icon-left">
			<i class="icon ion-key"></i>
			<input id="refund-pass" ng-focus="setKeyInput('REQ_PASS',action_auth.pass)" type="password" ng-model="action_auth.pass" placeholder="Enter Manager password">
		</label>
		<div style="text-align:center;padding:5px;color:#e70000;">{{action_auth.err}}</div>
		<label class="item item-input">
			<textarea ng-focus="setKeyInput('REFUND_NOTE',action_auth.reason)" id="aiv-refundnote" ng-model="action_auth.reason" rows="4" placeholder="Refund reason"></textarea>
		</label>
	</div>
	<div class="row">
		<div class="col">
			<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
				<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:30%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:30%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
				<!--<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>-->
			</ng-keypad>						
		</div>
	</div>
</script>
<script id="exit-popup.html" type="text/ng-template">
	<div class="list aivLabel">
		<label class="item item-icon-left">
			<i class="icon ion-key"></i>
			<input id="exit-pass" ng-focus="setKeyInput('REQ_PASS',action_auth.pass)" type="password" ng-model="action_auth.pass" placeholder="Enter Manager password">
		</label>
		<div style="text-align:center;padding:5px;color:#e70000;">{{action_auth.err}}</div>
	</div>
	<div class="row">
		<div class="col">
			<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
				<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:30%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:30%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
				<!--<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>-->
			</ng-keypad>						
		</div>
	</div>
</script>
<script id="report-modal.html" type="text/ng-template">
	<ion-modal-view style="height: 96vh;top:2%;" class="modal-responsive">
		<ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">{{selected_report_title}}</h1>
			<div class="buttons opt-buttons">
				<button class="button button-icon ion-close-circled" ng-click="closeModal('REPORT_MODAL');"></button>
			</div>
        </ion-header-bar>
		<ion-content>
			<div class="card list reports">
				<div class="item text-center">
					{{aiv_info.name}}<br>{{aiv_info.address}}<br>{{selected_report_title}} at {{present_time | date:'medium'}}
				</div>
				<div ng-if="selected_report_type=='X'" class="row" style="padding:5px;">
					<div class="col">	
						<button class="button button-positive button-clear icon-left ion-calendar" ng-click="openDatePicker('XR_FROM',xr_from_date)">{{ xr_from_date | date:'yyyy-MM-dd' }}</button>
					</div>
					<div class="col col-center col-20">		
						<label class="item item-input item-select header-select">
							<select ng-model="report_filters.pos" ng-options="terminal.name as terminal.name for terminal in ::report_terminals" ng-change="posFilter('X',all_docs)">
								<option value="">All Terminals</option>
							</select>
						</label>
					</div>
				</div>
				<div ng-if="selected_report_type=='Z'" class="row" style="padding:5px;">
					<div class="col col-20">	
						<button class="button button-positive button-clear icon-left ion-calendar" ng-click="openDatePicker('ZR_FROM',zr_from_date)">{{ zr_from_date | date:'yyyy-MM-dd' }}</button>
					</div>
					<div class="col col-33 col-center">		
						<div class="item item-input-inset" ng-if="z_amount.enable">
							<label class="input-label">
								Enter amount
							</label>
							<label class="item-input-wrapper">
								£ <input ng-model="report_filters.z_amount" type="text" placeholder=" Optional" ng-virtual-keyboard="kb_config">
							</label>
						</div>
					</div>
					<div class="col col-center">	
						<button  ng-if="z_amount.enable" class="button button-positive" ng-click="getSalesReport('Z',false)">GO</button>
					</div>
					<div class="col col-center col-20">		
						<label class="item item-input item-select header-select">
							<select ng-model="report_filters.pos" ng-options="terminal.name as terminal.name for terminal in ::report_terminals" ng-change="getSalesReport('Z',false)">
								<option value="">All Terminals</option>
							</select>
						</label>
					</div>
				</div>
				<div class="item item-divider">Sales :<span class="alignright">({{aiv_info.currency}})</span></div>
				<label class="item">
					<p>Sales total<span class="item-note">{{aiv_report.by_sales.subtotal | currency:"£":2}}</span></p>
					<p>Bag charges<span class="item-note">{{aiv_report.by_sales.total_bag | currency:"£":2}}</span></p>
					<p ng-if="POSSettings.show_delcharge_report" >Delivery charges<span class="item-note">{{aiv_report.by_sales.total_shipping | currency:"£":2}}</span></p>
					<p>Discounts<span class="item-note">-{{aiv_report.by_sales.total_discount | currency:"£":2}}</span></p><hr>
					<p>Total<span class="item-note">{{aiv_report.by_sales.total | currency:"£":2}}</span></p>
					<div ng-if="selected_report_type=='X'&&aiv_report.by_sales.total_unpaid">
						<p>UNPAID x {{aiv_report.by_sales.count_unpaid}} items<span class="item-note">{{aiv_report.by_sales.total_unpaid | currency:"£":2}}</span></p>
						<p>Orders {{aiv_report.by_sales.items_unpaid}} are UNPAID</p>
					</div>
				</label>
				<div class="item item-divider">By Delivery methods:</div>
				<label class="item">
					<p>Delivery x {{aiv_report.by_shipping.local_delivery.count}} items<span class="item-note">{{aiv_report.by_shipping.local_delivery.amount | currency:"£":2}}</span></p>
					<p>Collection x {{aiv_report.by_shipping.local_pickup.count}} items<span class="item-note">{{aiv_report.by_shipping.local_pickup.amount | currency:"£":2}}</span></p>
					<p>Takeaway x {{aiv_report.by_shipping.in_shop.count}} items<span class="item-note">{{aiv_report.by_shipping.in_shop.amount | currency:"£":2}}</span></p>
					<p>Sit-In x {{aiv_report.by_shipping.sitin.count}} items<span class="item-note">{{aiv_report.by_shipping.sitin.amount | currency:"£":2}}</span></p><hr>
					<p>Total x {{aiv_report.by_shipping.total.count}} items<span class="item-note">{{aiv_report.by_shipping.total.amount | currency:"£":2}}</span></p>
				</label>
				<div class="item item-divider">By Payment methods:</div>
				<label class="item">
					<p ng-if="justEat.orders">JustEat x {{aiv_report.by_payment.custom.count}} items<span class="item-note">{{aiv_report.by_payment.custom.amount | currency:"£":2}}</span></p>
					<p>Cash x {{aiv_report.by_payment.cod.count}} items<span class="item-note">{{aiv_report.by_payment.cod.amount | currency:"£":2}}</span></p>
					<p>Card x {{aiv_report.by_payment.card.count}} items<span class="item-note">{{aiv_report.by_payment.card.amount | currency:"£":2}}</span></p>
					<p>Online Card x {{aiv_report.by_payment.stripe.count}} items<span class="item-note">{{aiv_report.by_payment.stripe.amount | currency:"£":2}}</span></p>
					<p>PayPal x {{aiv_report.by_payment.paypal.count}} items<span class="item-note">{{aiv_report.by_payment.paypal.amount | currency:"£":2}}</span></p><hr>
					<p>Total x {{aiv_report.by_payment.total.count}} items<span class="item-note">{{aiv_report.by_payment.total.amount | currency:"£":2}}</span></p>
					<p>Refund x {{aiv_report.by_payment.refund.count}} items<span class="item-note">{{aiv_report.by_payment.refund.amount | currency:"£":2}}</span></p>
				</label>
				<div class="item item-divider">By Order types:</div>
				<label class="item">
					<p ng-if="justEat.orders">JustEat Orders x {{aiv_report.by_outlet.custom.count}} items<span class="item-note">{{aiv_report.by_outlet.custom.amount | currency:"£":2}}</span></p>
					<p>POS Orders x {{aiv_report.by_outlet.pos.count}} items<span class="item-note">{{aiv_report.by_outlet.pos.amount | currency:"£":2}}</span></p>
					<p>Web Orders x {{aiv_report.by_outlet.web.count}} items<span class="item-note">{{aiv_report.by_outlet.web.amount | currency:"£":2}}</span></p><hr>
					<p>Total x {{aiv_report.by_outlet.total.count}} items<span class="item-note">{{aiv_report.by_outlet.total.amount | currency:"£":2}}</span></p>
				</label>
				<div class="item item-divider">By Delivery & Payment:</div>
				<label class="item">
					<p>Cash-Takeaway x {{aiv_report.by_shipping_payment.takeaway_cod.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.takeaway_cod.amount | currency:"£":2}}</span></p>
					<p>Cash-Collection x {{aiv_report.by_shipping_payment.collection_cod.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.collection_cod.amount | currency:"£":2}}</span></p>
					<p>Cash-Delivery x {{aiv_report.by_shipping_payment.delivery_cod.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.delivery_cod.amount | currency:"£":2}}</span></p>
					<p>Cash-Sitin x {{aiv_report.by_shipping_payment.sitin_cod.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.sitin_cod.amount | currency:"£":2}}</span></p>
					<p>Card-Takeaway x {{aiv_report.by_shipping_payment.takeaway_card.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.takeaway_card.amount | currency:"£":2}}</span></p>
					<p>Card-Collection x {{aiv_report.by_shipping_payment.collection_card.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.collection_card.amount | currency:"£":2}}</span></p>
					<p>Card-Delivery x {{aiv_report.by_shipping_payment.delivery_card.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.delivery_card.amount | currency:"£":2}}</span></p>
					<p>Card-Sitin x {{aiv_report.by_shipping_payment.sitin_card.count}} items<span class="item-note">{{aiv_report.by_shipping_payment.sitin_card.amount | currency:"£":2}}</span></p>
				</label>
				<div class="item item-divider">By Product types:</div>
				<label class="item">
					<p>Hot x {{aiv_report.by_product_type.hot.count}} items<span class="item-note">{{aiv_report.by_product_type.hot.amount | currency:"£":2}}</span></p>
					<p>Cold x {{aiv_report.by_product_type.cold.count}} items<span class="item-note">{{aiv_report.by_product_type.cold.amount | currency:"£":2}}</span></p><hr>
					<p>Total x {{aiv_report.by_product_type.total.count}} items<span class="item-note">{{aiv_report.by_product_type.total.amount | currency:"£":2}}</span></p>
				</label>
				<div class="item item-divider">
					<p>Cash On Till<span class="item-note">{{aiv_report.by_sales.total_cash | currency:"£":2}}</span></p>
				</div>
			</div>
		</ion-content>
		<ion-footer-bar class="bar-light" style="height: 54px;">
			<button class="button button-balanced button-full pos-footer-btn" ng-click="print_reports(aiv_report);"><i class="icon ion-printer"></i>Print</button>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="void-report-modal.html" type="text/ng-template">
	<ion-modal-view style="height: 96vh;top:2%;" class="modal-responsive">
		<ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">{{selected_report_title}}</h1>
			<div class="buttons opt-buttons">
				<button class="button button-icon ion-close-circled" ng-click="closeModal('VOID_REPORT_MODAL');"></button>
			</div>
        </ion-header-bar>
		<ion-content>
			<div class="card list reports">
				<div class="item text-center">
					{{aiv_info.name}}<br>{{aiv_info.address}}<br>{{selected_report_title}} at {{present_time | date:'medium'}}
				</div>
				<div ng-if="selected_report_type=='VOID'" class="row" style="padding:5px;">
					<div class="col">	
						<button class="button button-positive button-clear icon-left ion-calendar" ng-click="openDatePicker('VOIDR_FROM',xr_from_date)">{{ voidr_from_date | date:'yyyy-MM-dd' }}</button>
					</div>
					<div class="col col-center col-20">		
						<label class="item item-input item-select header-select">
							<select ng-model="report_filters.pos" ng-options="terminal.name as terminal.name for terminal in ::report_terminals" ng-change="posFilter('VOID',all_docs)">
								<option value="">All Terminals</option>
							</select>
						</label>
					</div>
				</div>
				<div ng-repeat="void_data in aiv_report.data">
					<div class="item item-divider">
						<span ng-if="void_data.daily_order_no">ORDER : {{void_data.daily_order_no}}</span> 
						<span ng-if="void_data.table_num"> TABLE : {{void_data.table_num+"/"+void_data.table_server}}</span>
						<span ng-if="void_data.void_reason"> ({{void_data.void_reason}})</span>
					</div>
					<div class="item">
						<div ng-repeat="product in void_data.void_items">
							{{product.title+" x "+product.quantity+" items"}}<span class="item-note">{{product.sel_variations.price?product.sel_variations.price:product.total | currency:"£":2}}</span>
						</div><hr>
						<div style="font-weight:500;">Void Total<span class="item-note">{{void_data.void_total | currency:"£":2}}</span></div>
					</div>
				</div>
				<div class="item item-divider text-center">Grand Total : {{aiv_report.grand_total | currency:"£":2}}</div>
			</div>
		</ion-content>
		<ion-footer-bar class="bar-light" style="height: 54px;">
			<button class="button button-balanced button-full pos-footer-btn" ng-click="print_reports(aiv_report);"><i class="icon ion-printer"></i>Print</button>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="user-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">

        <ion-header-bar align-title="center" class="bar-positive">
			<h1 class="title">{{aiv_info.name+" - "+current_terminal}}</h1>
			<div class="buttons opt-buttons">
				<a class="button-icon icon {{pouch_replication_status.icon}} {{pouch_replication_status.class}}" title="{{pouch_replication_status.title}}"></a>
				<a ng-if="disableReplication !=true" class="button-icon icon {{replication_status.icon}} {{replication_status.class}}" title="{{replication_status.title}}"></a>
				<a class="button-icon icon ion-more {{pos_status.class}}" title="{{pos_status.title}}"></a>
				<a class="button button-stable button-outline " style='font-size: xx-large;'>{{displayTime}}</a>
				<a class="button button-stable button-outline">{{::aiv_info.APP_VER}}</a>
				<button ng-if="aiv_users.login_close" style="margin-left:15px;" class="button button-icon ion-close-circled" ng-click="closeModal('POS_USERS');"></button>
			</div>
        </ion-header-bar>
        <ion-content>
			<div ng-if="!aiv_toggles.user_view">
				<div class="row login-screen" style="margin-top:0px;">
					<div class="col col-25" style="border-right:1px solid #ddd;">
						<ion-list>
							<ion-radio name="users_login" class="bold-text tile-appear" style="font-size:16px;" ng-model="aiv_users.selected" ng-change="checkLogin()" ng-value="user._id"  ng-repeat="user in aiv_users.users " ng-if="user.role!='staff'">
							{{user.user_displayname}}
							</ion-radio>
						</ion-list>
					</div>
					<div class="col col-75">
						<div class="row" style="padding:0px 5px;">
							<div class="col" style="padding:0px 5px;">
								<div ng-if="aiv_users.pass" style="margin:0px;" class="error balanced animated fadeInLeft h4 padding-left">
									<i class="ion-checkmark"></i> {{aiv_users.pass}}
								</div>
								<div ng-hide="aiv_users.selected">
									<div class="card">
										<label class="item item-divider">
											<div class="input-label">
												Please select a user
											</div>
										</label>
									</div>
								</div>
							</div>
							<div class="col col-33 col-center text-right">
								<span class="badge" ng-class="{'badge-assertive':!fid_status.online,'badge-balanced':fid_status.online}">FID {{fid_status.online?'ON':'OFF'}}</span>
								<span ng-if="terminalData.type=='BACK'||terminalData.type=='BOTH'" class="badge" ng-class="{'badge-assertive blink':!onlineOrder.enable,'badge-balanced':onlineOrder.enable}"> ONLINE ORDERS {{onlineOrder.enable?'ACCEPT':'OFF'}}</span>
								<span ng-if="aiv_toggles.early_takeaway" class="badge badge-balanced">Early Takeaway</span>
							</div>
						</div>
						<div ng-if="aiv_users.selected">
							<div class="card" style="margin:10px;">
							  <label class="item item-input bold-text large-text ">
								<span class="input-label">Enter password</span>
								<input id="pass" ng-model="qwerty_inputs.pass" type="password" placeholder="password" style="font-size=x-large;" ng-keypress="loginEnter($event,qwerty_inputs.pass)">
							  </label>
							</div>
							<button ng-show="loginInfo.user_login && qwerty_inputs.pass" class="button button-full button-calm button-large" ng-click="aiv_logout();" ><i class="icon ion-log-out bold-text large-text " > Logout</i> </button>
							<button ng-hide="loginInfo.user_login && qwerty_inputs.pass" class="button button-full button-positive button-large" ng-click="login(qwerty_inputs.pass);" ><i class="icon ion-log-in bold-text large-text " > Login</i> </button>
						</div>
						<div ng-show="aiv_users.err" class="error assertive animated fadeInLeft h4 padding-left">
							<i class="ion-information-circled"></i> {{aiv_users.err}}
						</div>
						<!--<hr style="border: 1px solid #ddd;">-->
						<!--<div ng-if="terminalData.type!='KITCHEN'" class="row">-->
						<div ng-if="(terminalData.type!='KITCHEN' && terminalData.type != 'BACK') || (terminalData.type == 'BACK' && backTemplate.id != 'MPOS')" class="row responsive-sm product-gallery login-tiles" style="padding:0 5px;">
							<div class="col col-25" ng-repeat="method in shipping_methods track by $index">
								<button class="button button-large button-block item bold-text" ng-class="(selected_shipping.id==method.id&&startup.action=='SHIPPING')?'button-assertive':'button-balanced'" ng-click="startAction('SHIPPING',method);">{{method.title}}</button>
							</div>
							<div class="col col-25">
								<button class="button button-large button-block button-royal item item-text-wrap bold-text" ng-click="startAction('PRINT_LAST_ORDER');">Print Last Order</button>
							</div>
							<div class="col col-25">
								<button class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='ADD2ORDER'?'button-assertive':'button-calm'" ng-click="startAction('ADD2ORDER');">ADD TO AN ORDER</button>
							</div>
							<div class="col col-25">
								<button class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='LOOK_ORDER'?'button-assertive':'button-royal'" ng-click="startAction('LOOK_ORDER');">Look Thru orders/reprint</button>
							</div>
							<div class="col col-25">
								<button class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='PAYOFF'?'button-assertive':'button-positive'" ng-click="startAction('PAYOFF');">Pay off an order</button>
							</div>
							<div class="col col-25">
								<button ng-disabled="!loginInfo.role||loginInfo.role=='user'" class="button button-large button-block button-royal item item-text-wrap bold-text" ng-click="openCashdrawer();">Open Cashdrawer</button>
							</div>
							<div class="col col-25" ng-if="aiv_info.enable_table=='TRUE'">
							<button class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='TABLEVIEW'?'button-assertive':'button-innovative'" ng-click="startAction('TABLEVIEW');">TABLE VIEW</button>
						</div>
							<div class="col col-25" ng-if="justEat.orders">
								<button class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='JUSTEAT'?'button-assertive':'button-impulsive'" ng-click="startAction('JUSTEAT');">JUST EAT</button>
							</div>
							<div class="col col-25">
								<button class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='CUSTOMERS'?'button-assertive':'button-positive'" ng-click="startAction('CUSTOMERS');">Customers</button>
							</div>
							<div class="col col-25">
								<button ng-disabled="!loginInfo.role||loginInfo.role=='user'" class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='REPORTS'?'button-assertive':'button-innovative'" ng-click="startAction('REPORTS');">Reports</button>
							</div>
							<div class="col col-25">
								<button ng-disabled="!loginInfo.role||loginInfo.role=='user'" class="button button-large button-block item item-text-wrap bold-text" ng-class="startup.action=='SETTINGS'?'button-assertive':'button-positive'" ng-click="startAction('SETTINGS');">Settings</button>
							</div>
						</div>
						<div ng-if="terminalData.type == 'BACK' && backTemplate.id == 'MPOS'" class="row">
							<div class="col">
								<button class="button button-large button-block button-royal item item-text-wrap bold-text" style="line-height: 20px;" ng-click="startAction('PRINT_LAST_ORDER');">Print Last Order</button>
							</div>
						</div>
						<div  ng-if="aiv_users.selected" class="row">
							<div class="col">
								<ng-keypad on-key-pressed='onKeyPressed' style="font-size:1.1em;" class="bold-text tile-appear">
									<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
								</ng-keypad>						
							</div>
						</div>
					</div>
				</div>
				<a class="button button-large button-positive bold-text clock-out-button" >{{}}</a>
				<button class="button button-large button-positive bold-text clock-out-button" ng-click="openClockModel();">CLOCK IN/OUT</button>
				<button class="button button-large bold-text button-assertive exit-button" ng-click="exitApp()">EXIT</button>
				
			</div>
			<div ng-if="aiv_toggles.user_view">
				<div class="row responsive-sm" style="margin-top:0px;">
					<div class="col col-50 col-center" style="margin-left: 25%;">
						<div class="card" style="margin:10px;" >
						  <label class="item item-input bold-text large-text ">
							<input id="clock_pass" ng-model="qwerty_inputs.clock_pass" type="password" placeholder="Password" style="font-size=x-large;" ng-keypress="clock_loginEnter($event,qwerty_inputs.clock_pass)">
						  </label>
						</div>
						<div ng-show="aiv_users.err" class="error assertive animated fadeInLeft h4 padding-left">
							<i class="ion-information-circled"></i> {{aiv_users.err}}
						</div>
						<div class="padding row" >
							<ng-keypad on-key-pressed='onKeyPressed' class=" bold-text large-text tile-appear">
								<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
								<!--<ng-key ng-key-type='keypad.type' ng-key-data="keypad.data">{{keypad.data}}</ng-key>-->
							</ng-keypad>
						</div>
						<div ng-if="showClockInButton">
							<button ng-if="clockInOrNot!=''" class="button button-large button-block bold-text" ng-class="{'button-assertive':aiv_users.clock_in=='CLOCKIN','button-positive':aiv_users.clock_in!='CLOCKIN'}" style="background-color:#ffffff;color:black">CLOCK IN ON {{ clockInOrNot}}</button>
							<button ng-if="clockInOrNot ==''" class="button button-large button-block bold-text" ng-class="{'button-assertive':aiv_users.clock_in=='CLOCKIN','button-positive':aiv_users.clock_in!='CLOCKIN'}" ng-click="clockInUser('CLOCKIN');">CLOCK IN</button>
							<button ng-disabled="clockInOrNot ==''" class="button button-large button-block bold-text" ng-class="{'button-assertive':aiv_users.clock_in=='CLOCKOUT','button-positive':aiv_users.clock_in!='CLOCKOUT'}" ng-click="clockInUser('CLOCKOUT');">CLOCK OUT</button>
						</div>
						<button class="button button-large button-block bold-text button-assertive" ng-click="exitClockScreen();">CANCEL</button>;
					</div>
				</div>
			</div>
		</ion-content>
    </ion-modal-view>
</script>
<script id="open_item-modal.html" type="text/ng-template">
  <ion-modal-view class="aiv-modal-fullscreen" >
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Open Item</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('CUSTOM_PRODUCT');"></button>
        </div>
    </ion-header-bar>
    <ion-content style="bottom: 54px;" scroll="false">
		<div ng-if="custom_product.err" class="error assertive animated fadeInLeft h4 padding-left fadein fadeout">
			<i class="ion-checkmark"></i> {{custom_product.err}}
		</div>
		<ion-scroll direction="y" style="height:calc(100vh - 400px);">
			<div class="list list-inset" style="margin-top:5px;">
				<div class="item item-input-inset">
					<label class="input-label aiv-custom-font-size">
						Name
					</label>
					<label class="item-input-wrapper">
						<input name="open_item_name" type="text" placeholder="Product Name" ng-focus="setKeyInput('OPEN_PRDT_NAME',custom_product.title)" value="{{custom_product.title}}" ng-model="custom_product.title">
					</label>
				</div>
				<div class="item item-input-inset">
					<label class="input-label aiv-custom-font-size">
						Price
					</label>
					<label class="item-input-wrapper">
						£ <input ng-focus="setKeyInput('OPEN_PRDT_PRICE',custom_product.price)" value="{{custom_product.price}}" ng-model="custom_product.price" type="text" placeholder="Price">
					</label>
				</div>
				<div class="button-bar" style="padding:1px;" ng-if="product_depts.length">
					<label class="item input-label aiv-custom-font-size" style="padding:16px;">Send To</label>
					<button class="button button-positive bold-text aiv-custom-font-size" style="border-right-width:1px;" ng-class="custom_product.meta.wc_productdata_options[0].prdt_dept.length?'button-outline':''" ng-click="custom_product.meta.wc_productdata_options[0].prdt_dept=[];">NONE</button>
					<button class="button button-positive bold-text aiv-custom-font-size" style="border-right-width:1px;" ng-repeat="item in product_depts" ng-class="custom_product.meta.wc_productdata_options[0].prdt_dept.indexOf(item)<0?'button-outline':''" ng-click="arraySinglePush(custom_product.meta.wc_productdata_options[0].prdt_dept,item);">{{item}}</button>
				</div>
				<div class="button-bar" style="padding:1px;" ng-if="product_groups.length">
					<label class="item input-label aiv-custom-font-size" style="padding:16px;">Group</label>
					<button class="button button-positive bold-text aiv-custom-font-size" style="border-right-width:1px;" ng-class="custom_product.meta.wc_productdata_options[0].group?'button-outline':''" ng-click="custom_product.meta.wc_productdata_options[0].group='';">NONE</button>
					<button class="button button-positive bold-text aiv-custom-font-size" style="border-right-width:1px;" ng-repeat="item in product_groups" ng-class="custom_product.meta.wc_productdata_options[0].group!=item?'button-outline':''" ng-click="custom_product.meta.wc_productdata_options[0].group=item;">{{item}}</button>
				</div>
			</div>
		</ion-scroll>
		<div class="padding" style="position: absolute; bottom: 0px; padding: 5px 20px 5px 10px;width:100%;">
			<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
				<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
				<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>
			</ng-keypad>						
		</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<button class="button button-positive button-full pos-footer-btn" ng-click="saveOpenItem(custom_product);"><i class="icon ion-checkmark"></i>Done</button>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="product-update-modal.html" type="text/ng-template">
  <ion-modal-view style="height: 96vh;top:2%;">
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Add/Update products</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('UPDATE_PRODUCT');"></button>
        </div>
    </ion-header-bar>
    <ion-content>
	<div class="card list">
		<div ng-show="errors.update_product" class="error assertive animated fadeInLeft h4 padding-left">
			<i class="ion-information-circled"></i> {{errors.update_product}}
		</div>
		<div class="item item-divider">
		Changes will be reflected only if you click "Upload changes"
		</div>
		<label class="item item-input item-select">
			<div class="input-label">
				Category
			</div>
			<select style="width:80%;max-width:80%;" ng-model="update_product.categories[0]" ng-options="category.name as category.name for category in categories">
				<option value="">-- Choose Category --</option>
			</select>
		</label>
		<div class="item item-input-inset">
			<label class="input-label">
				Name
			</label>
			<label class="item-input-wrapper">
				<input ng-model="update_product.title" type="text" placeholder="Name" ng-virtual-keyboard="kb_config">
			</label>
		</div>
		<div class="item item-input-inset">
			<label class="input-label">
				Price
			</label>
			<label class="item-input-wrapper">
				£ <input ng-model="update_product.price" type="text" placeholder="Price" ng-focus="openPopover($event,'UPDATE_PRDT_PRICE',update_product.price)">
			</label>
		</div>
		<div class="item item-input-inset">
			<label class="input-label">
				Barcode
			</label>
			<label class="item-input-wrapper">
				<input ng-model="update_product.meta.wc_productdata_options[0].barcode" type="text" placeholder="Enter barcode" ng-virtual-keyboard="kb_config">
			</label>
		</div>
		<div class="item item-stable item-button-right">
			Product options
			<button class="button button-icon ion-plus-circled positive" style="font-size:44px;top:4px;" ng-click="OpenEditOptionModal();"></button>
		</div>
		<ion-item class="item item-icon-left item-icon-right pos-list" ng-repeat="item in update_product.attributes track by $index" ng-click="op_data.option_index=$index" ng-class="{selected : $index === op_data.option_index}">
			<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeOption($index)"></i>
			{{item.name | split:'###':0 | split:'_':0}}
			<i class="icon ion-edit calm aiv-button-icon" ng-click="OpenEditOptionModal(item);"></i>
		</ion-item>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<button class="button button-positive button-full pos-footer-btn" ng-click="op_data.add_product_flag?saveCreatedProduct(update_product):saveUpdatedProduct(update_product);"><i class="icon ion-checkmark"></i>Done</button>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="edit-option-modal.html" type="text/ng-template">
  <ion-modal-view style="height: 96vh;top:2%;">
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Add/Edit product options</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('EDIT_OPTION');"></button>
        </div>
    </ion-header-bar>
    <ion-content>
	<div class="card list">
		<div ng-show="OptionsObj.error" class="error assertive animated fadeInLeft h4 padding-left">
			<i class="ion-information-circled"></i> {{OptionsObj.error}}
		</div>
		<div class="item item-input-inset">
			<label class="input-label">
				Option Name
			</label>
			<label class="item-input-wrapper">
				<input ng-model="OptionsObj.name" type="text" placeholder="Name" ng-virtual-keyboard="kb_config">
			</label>
		</div>
		<div class="item item-divider">Option Values</div>
		<div class="item item-input-inset">
			<label class="item-input-wrapper">
				<input ng-model="OptionsObj.value" type="text" placeholder="Option value">
			</label>
			<label class="item-input-wrapper" style="margin-left:10px;">
				£ <input ng-model="OptionsObj.price" type="text" placeholder="Price">
			</label>
			<button ng-class="showEditOptionValue?'ion-checkmark-circled assertive':'ion-plus-circled positive'" class="button button-icon" style="font-size:44px;" ng-click="updateOptionValue();"></button>
		</div>
		<ion-item class="item item-icon-left item-icon-right pos-list" ng-repeat="item in OptionsObj.attribute.options track by $index" ng-click="OptionsObj.index=$index" ng-class="{selected : $index === OptionsObj.index}">
			<i class="icon ion-minus-circled assertive aiv-button-icon" ng-click="removeOptionValue($index)"></i>
			{{item | split:'###':0 }}
			<i class="icon ion-edit calm aiv-button-icon" ng-click="editOptionValue($index);"></i>
		</ion-item>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<button class="button button-positive button-full pos-footer-btn" ng-click="saveEditedOption();"><i class="icon ion-checkmark"></i>Done</button>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="update-category-modal.html" type="text/ng-template">
  <ion-modal-view>
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Create category</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('UPDATE_CATEGORY');"></button>
        </div>
    </ion-header-bar>
    <ion-content>
	<div class="card list">
		<div ng-show="errors.update_category" class="error assertive animated fadeInLeft h4 padding-left">
			<i class="ion-information-circled"></i> {{errors.update_category}}
		</div>
		<div class="item item-divider">
		Changes will be reflected only if you click "Upload changes"
		</div>
		<div class="item item-input-inset">
			<label class="input-label">
				Name
			</label>
			<label class="item-input-wrapper">
				<input ng-model="update_category.name" type="text" placeholder="Name" ng-virtual-keyboard="kb_config">
			</label>
		</div>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<button class="button button-positive button-full pos-footer-btn" ng-click="saveUpdatedCategory(update_category);"><i class="icon ion-checkmark"></i>Done</button>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="kitchen-order-modal.html" type="text/ng-template">
	<ion-modal-view class="modal-responsive" style="height: 96vh;top:2%;">
		<ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">ORDER {{kitchen_selected_order.data.order_meta.daily_order_no?kitchen_selected_order.data.order_meta.daily_order_no:kitchen_selected_order.data.id}}</h1>
			<div class="buttons opt-buttons">
				<button class="button button-icon ion-close-circled" ng-click="closeModal('KITCHEN_ORDER_MODAL');"></button>
			</div>
        </ion-header-bar>
		<ion-content>
			<div class="card list">
				<div class="item h1">
					<div class="row responsive-sm flex-item">
						<div class="col">
							ORDER : <span class="positive" ng-if="kitchen_selected_order.data.order_meta.daily_order_no">{{kitchen_selected_order.data.order_meta.daily_order_no}}</span>
							<span class="positive" ng-if="!kitchen_selected_order.data.order_meta.daily_order_no">{{kitchen_selected_order.data.id}}</span>
						</div>
						<div class="col text-right">
							Status :         <span class="text-aiv-{{kitchen_selected_order.data.status}}">{{::kitchen_selected_order.data.status_text}}</span>
						</div>
					</div>
					<div class="row responsive-sm flex-item">
						<div class="col">
							Type :  <span class="assertive">{{kitchen_selected_order.data.shipping_methods==''?'In Shop':kitchen_selected_order.data.shipping_methods}}</span>
						</div>
						<div class="col text-right" ng-show="kitchen_selected_order.data.order_meta.end_time">
							<timer end-time="kitchen_selected_order.data.order_meta.end_time">Time remaining : <span class="positive">{{hhours}}:{{mminutes}}:{{sseconds}}</span></timer>
						</div>
					</div>
				</div>
				<label ng-if="kitchen_selected_order.data.note" class="item item-text-wrap" style="font-size: 1.3em;color: #cc090e;">{{::kitchen_selected_order.data.note}}</label>
				<div class="row item-divider responsive-sm flex-item" style="padding:0 5px;">
					<div class="col col-33 ">Product</div>
					<div class="col col-50">Options</div>
					<div class="col">Qty</div>
				</div>
				<ion-item ng-show="terminalData.dept.indexOf(product.dept)>-1" class="item item-text-wrap pos-cart" ng-repeat="product in ::kitchen_selected_order.data.line_items track by $index">
					<div class="row responsive-sm product-gallery">
						<div class="col col-33 col-center h5">
							<span ng-if="product.title">{{product.title}}</span><span ng-if="product.name">{{product.name}}</span>
						</div>
						<div class="col col-50 col-center">
							<p ng-if="product.title" ng-repeat="(key, value) in product.attributestoshow">{{key | split:'###':0 | split:'_':0}}</p>
							<p ng-if="product.name" ng-repeat="attr in ::product.meta">{{attr.key | split:'###':0 | split:'_':0}} - {{attr.value | split:'###':0}}</p>
						</div>
						<div class="col col-center">{{product.quantity}}</div>
					</div>
				</ion-item>	
			</div>
		</ion-content>
    </ion-modal-view>
</script>
<script id="instructions-modal.html" type="text/ng-template">
  <ion-modal-view class="modal-responsive aiv-modal-fullscreen">
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">{{::sel_product.title}}</h1>
        <div class="buttons opt-buttons">
			<h3 class="bold-text">{{sel_product_price | currency:"£":2}}</h3>
        </div>
    </ion-header-bar>
    <ion-content scroll="false" delegate-handle="instrScroll">
	<div class="row" style="height:100%">
		<div class="col col-80">
			<ion-scroll style="height:100%;">
				<div class="row responsive-sm product-gallery">
					<div class="col col-25" style="padding:0px;" ng-repeat="option in cook_instructions track by $index" ng-click="setCookingInstructions(option);">
						<div class="item product-style">
							<label class="item-text-wrap h5 product-letter" >{{option | split:'###':0}}</label>
						</div>
					</div>
				</div>
			</ion-scroll>
		</div>
		<div class="col col-20">
			<ion-scroll style="height:100%;">
				<div class="item item-text-wrap" style="background-color:#ffc900;padding:2px;">
					<h2 style="font-weight: bold;">{{sel_product_price | currency:"£":2}}</h2>
					<h2 style="font-weight: bold;">{{::sel_product.title}}</h2>
					<ion-list >
					<ion-item class="item item-text-wrap pos-cart pos-list" ng-repeat="(key, value) in current_display_options track by $index" ng-class="{selected : key === selectattrwindow}"  >
						<div class="row responsive-sm ">
							<div class="col  col-center" style="font-size:0.9em;">{{key | split:'###':0 | split:'_':0}}
								<!--<p ng-repeat="(key, value) in product.sel_variations.attributes" ng-show="((value | split:'###':1)=='T')">{{key | split:'###':0 | split:'_':0}} - {{value | split:'###':0}}</p>-->
							</div>
							<div class="col col-33 col-center" style="font-size:0.9em;">{{value.toFixed(2)}}</div>
							
							<!--<div class="col col-10 col-center ">
							<button class="button button-small assertive" ng-click="deleteProduct($index);"><i class="icon ion-close"></i></button></div>-->
						</div>
					</ion-item>	
					</ion-list>
					<ion-item class="item " >
						<div class="row ">
							<div class="col col-50 col-center ">
								<button class="button  positive" ng-click="moveDownOption()"><i class="icon ion-arrow-down-a"></i></button>
							</div>
							<div class="col col-50 col-center ">
								<button class="button  positive" ng-click="moveUpOption();"><i class="icon ion-arrow-up-a"></i></button>
							</div>
						</div>
					</ion-item>	
					<ion-item class="item item-text-wrap " >
						<div class="row responsive-sm ">
							<div class="col col-center ">
								<button class="button  assertive" ng-click="removeOptionAttribute();"><i class="icon ion-close-circled"></i></button>
							</div>
						</div>
					</ion-item>	
				</div>
			</ion-scroll>
		</div>
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 60px;">
		<div class="button-bar">
			<button class="button button-full button-positive pos-footer-btn" ng-click="closeModal('SHOW_INSTRUCTIONS');"><i class="icon ion-close"></i> Cancel</button>
			<button style="margin-left:2px!important;" class="button button-full button-positive pos-footer-btn" ng-click="intoCartCooking(sel_product);closeModal('SHOW_INSTRUCTIONS');"><i class="icon ion-bag"></i> Add 2 cart</button>
		</div>
	</ion-footer-bar>
  </ion-modal-view>
</script>
<script id="loyalty-popup.html" type="text/ng-template">
	<div ng-show="loyaltyCustomer._id">
		<label class="item aiv-item">
			<p>{{loyaltyCustomer.billing_address.first_name}} {{loyaltyCustomer.billing_address.last_name}}</p>
			<p>{{loyaltyCustomer.billing_address.email}}</p>
			<p ng-show="loyaltyCustomer.billing_address.phone">{{loyaltyCustomer.billing_address.phone}}</p>
		</label>
	</div>
	<label ng-show="loyaltyCustomer.meta.points_to_redeem||loyaltyCustomer.meta.points_to_unlock" class="item item-input">
		<span class="input-label">Total Points : </span>
		<span class="positive" style="font-weight:700;">{{loyalty_card.reward_points}}   ( £{{loyalty_card.reward_amount}} )</span>
	</label>
	<label ng-show="loyaltyCustomer.meta.redeem_amount" class="item item-input">
		<span class="input-label">Last reward : </span>
		<span class="positive" style="font-weight:700;">£{{loyaltyCustomer.meta.redeem_amount}}</span>
	</label>
	<label ng-hide="loyaltyCustomer.meta.loyalty_card_id" class="item item-input">
		<span class="input-label">Enter Card ID : </span>
		<input ng-focus="setKeyInput('MANUAL_CARD_ID',loyalty_card.id)" ng-change="loyalty_card.manual_search=true;searchLoyaltyCustomer(loyalty_card.id)" ng-model="loyalty_card.id" type="text" value="{{loyalty_card.id}}">
	</label>
	<ion-spinner class="spinner-center" ng-show="loyalty_card.manual_search"></ion-spinner>
	<div ng-show="loyalty.error" style="text-align:center;padding:5px;color:#e70000;">{{loyalty.error}}</div>
	<label class="item item-input">
		<span class="input-label">Sale amount : </span>
		£ <input ng-disabled="!loyaltyCustomer._id" ng-focus="setKeyInput('POINTS_EARNED',hf_loyalty.sales.amount)" ng-model="loyalty_card.order_amount" type="text" value="{{loyalty_card.order_amount | currency:'':2}}">
	</label>
	<!--<button ng-disabled="!loyaltyCustomer._id" class="button button-royal button-full button-large padding" ng-click="redeemLoyaltyPoints()">Redeem Points</button>
	<button ng-disabled="!loyaltyCustomer._id" class="button button-positive button-full button-large padding" ng-click="addLoyaltyPoints()" >Add points</button>
	--><div class="row zero-padding">
		<div class="col zero-padding">
			<ng-keypad on-key-pressed='onKeyPressed' class=" bold-text tile-appear">
				<ng-key class="aiv-key" ng-repeat='key in ::aivkeys track by $index' ng-key-data='key' ng-key-type='keypad.type'>{{::key}}</ng-key>
			</ng-keypad>						
		</div>
	</div>
</script>
<script id="print-preview-modal.html" type="text/ng-template">
	<ion-modal-view style="height: 96vh;top:2%;">
		<ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Print Preview</h1>
			<div class="buttons opt-buttons">
				<button class="button button-icon ion-close-circled" ng-click="closeModal('PREVIEW_MODAL');"></button>
			</div>
        </ion-header-bar>
		<ion-content bind-compile-html="printData">
		</ion-content>
    </ion-modal-view>
</script>
<script id="sms-modal.html" type="text/ng-template">
    <ion-modal-view class="aiv-modal-fullscreen">
        <ion-header-bar align-title="left" class="bar-positive">
			<h1 class="title">Send Messages to customers</h1>
        </ion-header-bar>
        <ion-content scroll="false" class="has-header has-footer">
			<div ng-show="!sms.template_view" class="row" style="height:100%;padding:0;">
				<div class="col col-66">
					<div ng-if="errors.sms" class="item item-icon-right error assertive animated fadeInLeft h4" style="border:none;padding:5px 10px;">
						<i class="ion-information-circled"></i> {{errors.sms}}
						<i ng-click="errors.sms='';" class="icon dark ion-close-circled" style="cursor:pointer;"></i>
					</div>
					<div ng-show="success_done.sms" class="item item-icon-right error balanced animated fadeInLeft h4 padding-left" style="border:none;padding:5px 10px;">
						<i class="ion-checkmark"></i> {{success_done.sms}}
						<i ng-click="success_done.sms='';" class="icon dark ion-close-circled" style="cursor:pointer;"></i>
					</div>
					<ion-scroll direction="y" ng-style="{height: scroll_height}">
						<div class="list list-inset">
							<div class="item item-input-inset">
								<label class="item-input-wrapper">
									<input type="text" ng-focus="setKeyInput('SMS_RECIPIENTS',sms.recipients)" ng-model="sms.recipients" placeholder="Recipients separated by comma"></textarea>
								</label>
							</div>
							<a class="item item-positive" ng-click="sms.template_view=!sms.template_view">Select a message here</a>
							<label class="item item-input">
								<textarea ng-focus="setKeyInput('SMS_CONTENT',sms.content)" id="aiv-recipients" ng-model="sms.content" rows="10" placeholder="Message content"></textarea>
							</label>
						</div>
					</ion-scroll>
					<div class="padding col col-66" style="position: absolute; bottom: 0px; padding: 5px 20px 5px 10px;">
						<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
							<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty2 track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:40%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_bksp_key">{{::aiv_bksp_key}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:20%;" ng-key-type='keypad.type' ng-key-data="aiv_clear_key">{{::aiv_clear_key}}</ng-key>
							<ng-key class="aiv_qwerty" style="width:20%;background-color:#886aea;" ng-key-type='keypad.type' ng-key-data="aiv_enter_key">{{::aiv_enter_key}}</ng-key>
						</ng-keypad>						
					</div>
				</div>
				<div class="col col-34" style="padding:0;border:1px solid #ddd;">
					<div class="item-input-inset" style="padding:5px;">
					  <label class="item-input-wrapper">
						<input ng-focus="setKeyInput('SMS_SEARCH',sms.searchCust)" type="search" ng-model="sms.searchCust" placeholder="Search">
					  </label>
					  <button class="button button-small button-positive  icon ion-backspace" ng-click="sms.searchCust='';" style="margin-left: 5px;"></button>
					</div>
					<ion-checkbox class="item-divider" ng-model="sms_customers.selectAll" ng-click="selectAllCustomers();$event.stopPropagation();">Select All</ion-checkbox>
					<ion-scroll direction="y" ng-style="{height: sms_cust_list_height}">
						<ion-list>
							<ion-checkbox ng-repeat="customer in sms_customers.customers | orderBy:'first_name' | filter:sms.searchCust" ng-model="customer.selected" ng-click="addSMSCustomer(customer.billing_address.phone,customer.email,customer.selected)">{{customer.first_name?(customer.first_name+" ("+customer.billing_address.phone+")"):customer.billing_address.phone}}</ion-checkbox>
						</ion-list>
					</ion-scroll>
				</div>
			</div>
			<ion-scroll ng-show="sms.template_view" direction="y" style="height:90%;">
				<ion-list>
					<ion-item class="item-text-wrap" ng-repeat="template in SMSTemplates" ng-click="sms.content=template;sms.template_view=!sms.template_view">{{template}}</ion-item>
				</ion-list>
			</ion-scroll>
        </ion-content>
		<ion-footer-bar class="bar-light" style="height: 45px;padding:0px;">
			<div class="button-bar">
				<button ng-if="sms.template_view" class="button button-full button-positive pos-footer-btn" ng-click="sms.template_view=!sms.template_view;"><i class="icon ion-arrow-return-left"></i> Back</button>
				<button ng-show="!sms.template_view" class="button button-full button-positive pos-footer-btn" ng-click="sendSMS(sms.content)" ng-disabled="!spinDisabled"><i class="icon ion-checkmark"></i> Send Message</button>
				<button ng-show="!sms.template_view" style="margin-left:2px!important;" class="button button-full button-positive pos-footer-btn" ng-click="closeModal('SEND_SMS')"><i class="icon ion-close"></i>Close</button>
			</div>
		</ion-footer-bar>
    </ion-modal-view>
</script>
<script id="custom-order-modal.html" type="text/ng-template">
  <ion-modal-view class="aiv-modal-fullscreen" >
    <ion-header-bar align-title="left" class="bar-positive">
        <h1 class="title">Custome Order</h1>
        <div class="buttons">
			<button style="margin-left:10px;" class="button button-icon ion-close-circled" ng-click="closeModal('CUSTOM_ORDER');"></button>
        </div>
    </ion-header-bar>
    <ion-content style="bottom: 54px;">
	<div class="list card" style="margin:0 10px;">
		<div ng-show="custom_order_product.err" class="error assertive animated fadeInLeft h4 padding-left">
			<i class="ion-checkmark"></i> {{custom_order_product.err}}
		</div>
		<div class="item item-toggle  large-text tile-appear">Print Receipt
			<label class="toggle">
			   <input ng-model="print_config.receipt" type="checkbox">
			   <div class="track">
				 <div class="handle"></div>
			   </div>
			</label>
		</div>
		<div class="item item-input-inset">
			<label class="input-label">
				Amount
			</label>
			<label class="item-input-wrapper">
				£ <input ng-focus="setKeyInput('CUSTOM_ORDER_AMT',custom_order_product.price)" value="{{custom_order_product.price}}" ng-model="custom_order_product.price" type="text" placeholder="Amount">
			</label>
		</div>
		<label class="item item-input">
			<textarea id="aiv-note" ng-focus="setKeyInput('ORDER_NOTE',order_note.note)" ng-model="order_note.note" rows="8" placeholder="Notes"></textarea>
		</label>
	</div>
	<div class="padding">
		<ng-keypad on-key-pressed='onKeyPressed' style="font-size:large;" class="bold-text tile-appear">
			<ng-key style="background-color:{{::key.bk_color}}" class="aiv_qwerty" ng-repeat='key in ::aiv_qwerty track by $index' ng-key-data='key.value' ng-key-type='keypad.type'>{{::key.value}}</ng-key>
			<ng-key class="aiv_qwerty" style="width:100%;" ng-key-type='keypad.type' ng-key-data="aiv_space_key">{{::aiv_space_key}}</ng-key>
		</ng-keypad>						
	</div>
    </ion-content>
	<ion-footer-bar class="bar-light" style="height: 54px;">
		<button class="button button-positive button-full pos-footer-btn" ng-disabled="pos_action.done_clicked" ng-click="createCustomOrder(custom_order_product);"><i class="icon ion-checkmark"></i>Done</button>
	</ion-footer-bar>
  </ion-modal-view>
</script>